<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0"><meta name="baidu-site-verification" content="code-KCMz4b3cnd"><meta name="google-site-verification" content="MTp8U7dJ1uzrfz8Mu6rgqX1CIm3HjqPWd0xaRcv1tFg"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="mask-icon" href="/images/favicon.png" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"aisakaaoi.github.io",root:"/",scheme:"Pisces",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!1,show_result:!1,style:null},back2top:{enable:!0,sidebar:!0,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:"valine",storage:!0,lazyload:!1,nav:null,activeClass:"valine"},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="在视频处理中，我们经常会用到不同的色彩空间：非线性 RGB、线性 RGB、YUV、XYZ……为什么需要这么多的色彩空间呢？为什么在FFmpeg中会有 color_space，color_transfer，color_primaries 等一系列的颜色属性呢？这些术语之间究竟隐藏着什么秘密？ 视频采集 图片来源：https:&#x2F;&#x2F;thinklucid.com&#x2F;tech-briefs&#x2F;understan"><meta property="og:type" content="article"><meta property="og:title" content="视频中为什么需要这么多的颜色空间？"><meta property="og:url" content="https://aisakaaoi.github.io/863ce15a.html"><meta property="og:site_name" content="逢坂葵的个人博客"><meta property="og:description" content="在视频处理中，我们经常会用到不同的色彩空间：非线性 RGB、线性 RGB、YUV、XYZ……为什么需要这么多的色彩空间呢？为什么在FFmpeg中会有 color_space，color_transfer，color_primaries 等一系列的颜色属性呢？这些术语之间究竟隐藏着什么秘密？ 视频采集 图片来源：https:&#x2F;&#x2F;thinklucid.com&#x2F;tech-briefs&#x2F;understan"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://aisakaaoi.github.io/863ce15a/1.webp"><meta property="og:image" content="https://aisakaaoi.github.io/863ce15a/2.webp"><meta property="og:image" content="https://aisakaaoi.github.io/863ce15a/3.webp"><meta property="og:image" content="https://aisakaaoi.github.io/863ce15a/4.webp"><meta property="og:image" content="https://aisakaaoi.github.io/863ce15a/5.webp"><meta property="og:image" content="https://aisakaaoi.github.io/863ce15a/6.webp"><meta property="og:image" content="https://aisakaaoi.github.io/863ce15a/7.webp"><meta property="og:image" content="https://aisakaaoi.github.io/863ce15a/8.webp"><meta property="og:image" content="https://aisakaaoi.github.io/863ce15a/9.webp"><meta property="og:image" content="https://aisakaaoi.github.io/863ce15a/10.webp"><meta property="og:image" content="https://aisakaaoi.github.io/863ce15a/11.webp"><meta property="og:image" content="https://aisakaaoi.github.io/863ce15a/12.webp"><meta property="og:image" content="https://aisakaaoi.github.io/863ce15a/13.webp"><meta property="og:image" content="https://aisakaaoi.github.io/863ce15a/14.webp"><meta property="og:image" content="https://aisakaaoi.github.io/863ce15a/15.webp"><meta property="og:image" content="https://aisakaaoi.github.io/863ce15a/16.webp"><meta property="og:image" content="https://aisakaaoi.github.io/863ce15a/17.webp"><meta property="og:image" content="https://aisakaaoi.github.io/863ce15a/18.webp"><meta property="article:published_time" content="2023-05-27T13:18:46.000Z"><meta property="article:modified_time" content="2026-01-23T11:02:51.835Z"><meta property="article:author" content="Aisaka Aoi"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://aisakaaoi.github.io/863ce15a/1.webp"><link rel="canonical" href="https://aisakaaoi.github.io/863ce15a.html"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>视频中为什么需要这么多的颜色空间？ | 逢坂葵的个人博客</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script"),t=(e.src="https://hm.baidu.com/hm.js?7308ed05421777c301eefa3754da1b42",document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="逢坂葵的个人博客" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">aoi学院</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">Aisaka's Blog, School of Aoi, Aisaka University</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">20</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">1007</span></a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="reading-progress-bar"></div><a href="https://github.com/AisakaAoi" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://aisakaaoi.github.io/863ce15a.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/manatsu.jpg"><meta itemprop="name" content="Aisaka Aoi"><meta itemprop="description" content="Aisaka's Blog, School of Aoi, Aisaka University"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="逢坂葵的个人博客"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">视频中为什么需要这么多的颜色空间？</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2023-05-27 21:18:46" itemprop="dateCreated datePublished" datetime="2023-05-27T21:18:46+08:00">2023-05-27</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%F0%9F%8C%99%E9%80%A2%E5%9D%82%E6%9D%82%E8%B0%88%E4%B8%8E%E6%90%AC%E8%BF%90/" itemprop="url" rel="index"><span itemprop="name">🌙逢坂杂谈与搬运</span></a> </span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%F0%9F%8C%99%E9%80%A2%E5%9D%82%E6%9D%82%E8%B0%88%E4%B8%8E%E6%90%AC%E8%BF%90/%E2%AD%90%E4%B8%80%E4%BA%9B%E5%85%B4%E8%B6%A3/" itemprop="url" rel="index"><span itemprop="name">⭐一些兴趣</span></a> </span></span><span id="/863ce15a.html" class="post-meta-item leancloud_visitors" data-flag-title="视频中为什么需要这么多的颜色空间？" title="阅读次数"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span class="leancloud-visitors-count"></span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Valine：</span> <a title="valine" href="/863ce15a.html#valine-comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/863ce15a.html" itemprop="commentCount"></span></a></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>6.7k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>17 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>在视频处理中，我们经常会用到不同的色彩空间：非线性 RGB、线性 RGB、YUV、XYZ……为什么需要这么多的色彩空间呢？为什么在FFmpeg中会有 color_space，color_transfer，color_primaries 等一系列的颜色属性呢？这些术语之间究竟隐藏着什么秘密？</p><h3 id="视频采集"><a href="#视频采集" class="headerlink" title="视频采集"></a>视频采集</h3><img src="/863ce15a/1.webp"><div align="center">图片来源：https://thinklucid.com/tech-briefs/understanding-digital-image-sensors/</div><span id="more"></span><p>如上图所示，在相机系统中，外部世界的光信息（光子，photon）通过透镜或其他光学器件聚焦之后达到相机的图像传感器（CCD 或者 CMOS）。[1]</p><p>图像传感器可以将一个入射光子转换为对应的一个电子（electron）。</p><p>在曝光时间内，图像传感器对转换的电子进行电荷积累。</p><p>然后，图像传感器会将积累的电荷信号转换成对应的电压信号。</p><p>最后，利用 ADC（模数变换器，analog-to-digital converter）[2]把电信号转换成数字信号，而转换后的数字信号则为某个范围内的整数值。</p><hr><h3 id="ADC-数字信号的取值范围"><a href="#ADC-数字信号的取值范围" class="headerlink" title="ADC 数字信号的取值范围"></a>ADC 数字信号的取值范围</h3><p>ADC 转换之后的数字信号的取值范围受限于 ADC 设备。对于 8-bit 的 ADC 而言，数字信号的取值范围为 [0, 2^8-1]，因此，对于每一个像素而言，会用 [0, 255] 之间的整数来进行编码。</p><img src="/863ce15a/2.webp"><div align="center">图片来源：https://www.astropix.com/html/astrophotography/how.html</div><p>ADC 转换的数字信号的数值是一个线性编码的过程，这意味着如果将图像传感器上的光量增加1倍，则 ADC 转换之后对应的数值也会增加1倍。这是一个非常有用的特性：无论是增加物理世界的光量，还是增加 ADC 转换之后的数值，对图片而言，都会带来相同的效果。线性编码意味着我们所处理的数据和光发射的强度成正比关系。[3]</p><p>由数码相机中的 CMOS 传感器产生并写入原始文件（Raw File）的数据是线性的。与普通照片相比，线性数据通常看起来非常暗且对比度较低。[4]</p><img src="/863ce15a/3.webp"><div align="center">图片来源：https://www.astropix.com/html/astrophotography/how.html</div><p>在iPhone手机中，可以通过设置相机来拍摄 Apple ProRAW [5]格式的照片。</p><hr><h3 id="视频伽马校正"><a href="#视频伽马校正" class="headerlink" title="视频伽马校正"></a>视频伽马校正</h3><p>实际上，研究表明，人类视觉系统是以对数函数的方式来感知光亮度。这意味着，人眼会提高暗部的敏感度，降低高光部分的敏感度。[6]</p><img src="/863ce15a/4.webp"><div align="center">图片来源：https://www.pathwaylighting.com/products/downloads/brochure/technical_materials_1466797044_Linear+vs+Logarithmic+Dimming+White+Paper.pdf</div><p>从数学角度看，感知光强度和测量光强度之间存在一个近似的平方关系，具体如下式所示。</p><img src="/863ce15a/5.webp"><p>由于人类视觉感知系统不是以线性方式工作的，因此必须使用非线性曲线来对 ADC 生成的线性数据进行变换，从而使得拍摄的图像色调与我们的视觉系统的工作方式相匹配。这个过程也就是我们所说的伽马校正[7]。</p><img src="/863ce15a/6.webp"><p>因此，在从线性 RGB 空间转换到非线性 RGB 空间时，需要γ作为转换参数。相机中的 ISP 模块负责对图像传感器的线性 RGB 进行伽马校正进而产生对应的符合人眼感知的非线性 RGB 数据。</p><img src="/863ce15a/7.webp"><hr><h3 id="RGB的设备依赖性"><a href="#RGB的设备依赖性" class="headerlink" title="RGB的设备依赖性"></a>RGB的设备依赖性</h3><p>不同显示设备支持的色域空间不同，因此对于不同的显示设备而言，伽马校正之后的 RGB 数值也不同。从这个角度讲，RGB是设备依赖型的色彩空间。</p><hr><h3 id="视频压缩"><a href="#视频压缩" class="headerlink" title="视频压缩"></a>视频压缩</h3><p>根据如上的信息，我们知道：相机系统经过 ISP 处理之后，最终会得到非线性的 RGB 信息。对于视频而言，如果以 RGB 存储每帧的信息，则需要消耗大量的存储空间。</p><p>人类视觉系统对颜色信息的敏感度要弱于亮度信息，利用这一特点，通常相机会将捕获的 RGB 信息转换为 YUV [8]格式，然后对 YUV 格式进行色度信息采样（例如，YUV420）以便压缩图像空间。</p><p>RGB-&gt;YUV，不同标准有不同要求，一般常用的标准有：</p><p>BT. 601 (SD: Standard-Definition) [9]</p><p>BT. 709 (HD: High-Definition) [10]</p><p>BT. 2020 (UHD: Ultra-High-Definition) [11]</p><hr><h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><p>标准中，不但会规定 RGB-&gt;YUV 的转换系数，同时还会规定从线性 RGB 到非线性 RGB 转换的 gamma 系数。</p><p>将 RGB 颜色模型转换成 YUV 模型后，接下来会采用某种视频编解码算法（例如，H265、VP9）对获取的数据进行视频编码，最终得到视频文件（此处忽略了音频的采集编码以及合流的操作）。</p><img src="/863ce15a/8.webp"><hr><h3 id="视频转码"><a href="#视频转码" class="headerlink" title="视频转码"></a>视频转码</h3><p>出于各种原因，例如：</p><ul><li>终端用户的带宽受限</li><li>终端用户支持的视频编解码算法和相机压缩视频的编解码算法不一致</li><li>……</li></ul><p>一般不会直接把相机产出的视频文件分发给用户去消费。媒体服务商会对相机生成的视频文件进行转码，然后选择合适的转码后的视频分发给终端消费用户。[12]</p><p>在视频转码阶段，如果我们希望对原视频进行色域的变换，例如从 BT. 601 转码为 BT. 709，则需要在不同色域的 RGB 数值之间进行转换。[13]</p><p>在不同的色域空间进行 RGB 数据的转换，这也就是我们所说的色彩管理[14]。色彩管理会对图像进行颜色转换以适配当前环境下的颜色效果，从而保证同一张图片在不同输入、输出上都呈现出最好的颜色。[15]</p><p>色彩转换需要在某个线性空间下进行操作，并且操作过程需要保持设备的独立性。因此，不同的 RGB 色域空间是不能直接进行转换的，需要一个设备无关、线性的颜色模型作为中转才能实现其转换。</p><p>而 XYZ（CIE 1931 XYZ color space）[16] 具备设备无关、线性操作的特性。</p><p>在 FFmpeg 中，主要使用 colorspace 滤镜 来完成不同色域空间的转换。[17]根据colorspace的实现可知，在 FFmpeg 中，BT.601-&gt;BT.709的转换过程如下所示：</p><img src="/863ce15a/9.webp"><p>在如上的变换中，涉及到3个颜色空间的转换，分别是：</p><ul><li>YUV 和 RGB 之间的转换</li><li>线性 RGB 和非线性 RGB 之间的转换</li><li>线性 RGB 和 XYZ 之间的转换</li></ul><p>在FFmpeg中，所有的这些转换参数都保存在 AVFrame [18]结构中：</p><p>AVFrame-&gt;colorspace [19]中保存了 YUV&#x2F;RGB 的转换矩阵</p><p>AVFrame-&gt;color_trc[20] 中保存了线性 RGB 和非线性 RGB 之间的转换函数（也被称为transformation characteristics）</p><p>AVFrame-&gt;color_primaries[21]中保存了RGB&#x2F;XYZ的转换矩阵</p><p>如果用 ffprobe 命令解析视频文件，则：</p><ul><li>color_space字段对应 YUV&#x2F;RGB 的转换矩阵</li><li>color_transfer字段对应线性 RGB 和非线性 RGB 之间的转换函数</li><li>color_primaries字段对应 RGB&#x2F;XYZ 的转换矩阵</li></ul><img src="/863ce15a/10.webp"><p>在如上的例子中，arib-std-b67 [22]也就是我们所熟悉的 HLG。</p><p>在 MediaInfo 中，</p><ul><li>Matrix coefficients 字段对应 YUV&#x2F;RGB 的转换矩阵</li><li>Transfer characteristics 字段对应线性 RGB 和非线性 RGB 之间的转换函数</li><li>Color primaries 字段对应RGB&#x2F;XYZ的转换矩阵</li></ul><p>除了如上的参数外，AVFrame-&gt;range[23] 还用来存储视频中对应像素的每个分量的取值范围。在 vf_setparams.c[24]中也作了相关的定义说明：</p><img src="/863ce15a/11.webp"><hr><h3 id="视频解码-amp-播放"><a href="#视频解码-amp-播放" class="headerlink" title="视频解码&amp;播放"></a>视频解码&amp;播放</h3><p>转码之后的视频，可以通过各种渠道分发到终端用户进行消费。对于大部分显示设备，例如 CRT 显示器、LCD、OLED，屏幕上的每个像素都是通过驱动三个非常靠近但仍然分开的小型 RGB 光源而构建的。[25] 因此，显示屏（监视器、电视机、屏幕等等）仅使用 RGB 模型，并以不同的方式来组织，并显示最终的图像。[26]</p><img src="/863ce15a/12.webp"><div align="center">图片来源：https://github.com/leandromoreira/digital_video_introduction</div><p>如前所述，不同的显示设备采用的 RGB 的色域并不一定相同，因此 RGB 是一种设备依赖型的颜色模型。[27]在 Mac 电脑上，可以通过显示器配置来选择显示器支持不同的 RGB 色域。</p><img src="/863ce15a/13.webp"><hr><h4 id="显示设备和相机的色域不一致"><a href="#显示设备和相机的色域不一致" class="headerlink" title="显示设备和相机的色域不一致"></a>显示设备和相机的色域不一致</h4><p>当显示设备支持的色域从 sRGB 变为 Rec. 2020 时，如果直接显示 sRGB 色域下的数据，则会导致比较严重的颜色失真。</p><img src="/863ce15a/14.webp"><p>和转码阶段的色域转换类似，此时也需要在不同的色域空间进行 RGB 数据的转换（色彩管理）以保证相同的视频在不同输入、输出、显示设备上都呈现出最好的颜色。</p><p>对于显示设备而言，sRGB-&gt;RGB(Rec.2020)的转换过程如下所示：</p><img src="/863ce15a/15.webp"><p>因此，对于拍摄设备和显示设备的色域不同时，视频的播放增加了色彩管理的过程。</p><img src="/863ce15a/16.webp"><hr><h3 id="视频观看"><a href="#视频观看" class="headerlink" title="视频观看"></a>视频观看</h3><p>虽然视频信息的采集和最终终端播放采用的都是 RGB 的颜色模型，但是对人眼而言，RGB 其实并不直观，比如我们很难马上反应出天青色的 RGB 色值？</p><p>为了能够更直观的表示颜色，又引入了 HSL[28] 色彩模型。HSL 比 RGB 更加直观，比如：想从黄色过渡到红色，只需要调整色相即可，饱和度和亮度保持不变。因此，HSL 一般更适合人的色彩感知，而 RGB 更适合显示领域。</p><p>为了让作品可以呈现出期望的效果，提升用户的视觉体验，在摄影后期，使用 HSL 对作品进行调整是最方便的一种方式。利用 HSL 对作品进行调整，简单几步就可以让灰暗的「马路随拍」秒变「街头大片」。[29]</p><img src="/863ce15a/17.webp"><div align="center">图片来源：https://zhuanlan.zhihu.com/p/142767122</div><p>FFmpeg的signalstats滤镜可以分析获取视频的色调、饱和度、亮度信息。但是该滤镜获取的色调、饱和度和 HSL 中的计算 [30]是不一致的。</p><p>signalstats计算色调、饱和度的算法如下所示：</p><img src="/863ce15a/18.webp"><p>如果需要得到视频的标准 HSL 信息，可以使用作者开发的 vf_hsl 滤镜[31]。</p><hr><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>虽然颜色还是那个颜色，但是不同的颜色空间的适用范围并不相同：</p><ul><li>RGB：面向采集和显示设备</li><li>YUV：面向存储</li><li>HSL：面向人类视觉感知</li><li>XYZ：RGB之间的转换桥梁</li></ul><p>从视频采集到视频消费的整个过程，涉及到不同的设备和标准，而不同的设备和标准所支持的色域空间又不相同。正是通过不同的颜色模型转换和不同的色域转换，才得以在不同输入、输出、显示设备上都呈现出最好的颜色，才得以让我们实现以近似相同的观看体验来消费视频。</p><hr><h3 id="作者简介"><a href="#作者简介" class="headerlink" title="作者简介"></a>作者简介</h3><p>王伟，17哥，百度资深测试工程师。百度视频质量评测技术负责人，在解决视频质量评测的标准化、置信度方面有丰富的实践经验，搭建了百度首个体系化的视频质量评测服务平台，并服务于多个视频业务。</p><hr><h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><blockquote><p>[1] <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/158502818">https://zhuanlan.zhihu.com/p/158502818</a><br>[2] <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Analog-to-digital_converter">https://en.wikipedia.org/wiki/Analog-to-digital_converter</a><br>[3] <a target="_blank" rel="noopener" href="https://discuss.pixls.us/t/what-does-linear-rgb-mean/16584">https://discuss.pixls.us/t/what-does-linear-rgb-mean/16584</a><br>[4] <a target="_blank" rel="noopener" href="https://www.astropix.com/html/astrophotography/how.html">https://www.astropix.com/html/astrophotography/how.html</a><br>[5] <a target="_blank" rel="noopener" href="https://support.apple.com/zh-cn/HT211965">https://support.apple.com/zh-cn/HT211965</a><br>[6] <a target="_blank" rel="noopener" href="https://www.pathwaylighting.com/products/downloads/brochure/technical_materials_1466797044_Linear+vs+Logarithmic+Dimming+White+Paper.pdf">https://www.pathwaylighting.com/products/downloads/brochure/technical_materials_1466797044_Linear+vs+Logarithmic+Dimming+White+Paper.pdf</a><br>[7] <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Gamma_correction">https://en.wikipedia.org/wiki/Gamma_correction</a><br>[8] <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/YUV">https://en.wikipedia.org/wiki/YUV</a><br>[9] <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Rec._601">https://en.wikipedia.org/wiki/Rec._601</a><br>[10] <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Rec._709">https://en.wikipedia.org/wiki/Rec._709</a><br>[11] <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Rec._2020">https://en.wikipedia.org/wiki/Rec._2020</a><br>[12] <a target="_blank" rel="noopener" href="https://medium.com/videocoin/what-is-video-transcoding-and-why-do-you-do-it-348a2610cefc">https://medium.com/videocoin/what-is-video-transcoding-and-why-do-you-do-it-348a2610cefc</a><br>[13] <a target="_blank" rel="noopener" href="https://medium.com/invideo-io/talking-about-colorspaces-and-ffmpeg-f6d0b037cc2f">https://medium.com/invideo-io/talking-about-colorspaces-and-ffmpeg-f6d0b037cc2f</a><br>[14] <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Color_management">https://en.wikipedia.org/wiki/Color_management</a><br>[16] <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/CIE_1931_color_space">https://en.wikipedia.org/wiki/CIE_1931_color_space</a><br>[17] <a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43194305/article/details/107944264">https://blog.csdn.net/weixin_43194305/article/details/107944264</a><br>[18] <a target="_blank" rel="noopener" href="https://ffmpeg.org/doxygen/trunk/structAVFrame.html">https://ffmpeg.org/doxygen/trunk/structAVFrame.html</a><br>[19] <a target="_blank" rel="noopener" href="https://ffmpeg.org/doxygen/trunk/structAVFrame.html#a9262c231f1f64869439b4fe587fe1710">https://ffmpeg.org/doxygen/trunk/structAVFrame.html#a9262c231f1f64869439b4fe587fe1710</a><br>[20] <a target="_blank" rel="noopener" href="https://ffmpeg.org/doxygen/trunk/structAVFrame.html#ab09abb126e3922bc1d010cf044087939">https://ffmpeg.org/doxygen/trunk/structAVFrame.html#ab09abb126e3922bc1d010cf044087939</a><br>[21] <a target="_blank" rel="noopener" href="https://ffmpeg.org/doxygen/trunk/pixfmt_8h.html#ad384ee5a840bafd73daef08e6d9cafe7">https://ffmpeg.org/doxygen/trunk/pixfmt_8h.html#ad384ee5a840bafd73daef08e6d9cafe7</a><br>[22] <a target="_blank" rel="noopener" href="https://ffmpeg.org/doxygen/trunk/pixfmt_8h.html#ad4791ea14975f098b649db7fcd731ce6">https://ffmpeg.org/doxygen/trunk/pixfmt_8h.html#ad4791ea14975f098b649db7fcd731ce6</a><br>[23] <a target="_blank" rel="noopener" href="https://ffmpeg.org/doxygen/trunk/pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589a">https://ffmpeg.org/doxygen/trunk/pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589a</a><br>[24] <a target="_blank" rel="noopener" href="https://github.com/FFmpeg/FFmpeg/blob/a78f136f3fa039fd7ad664fd6e6e976f1448c68b/libavfilter/vf_setparams.c">https://github.com/FFmpeg/FFmpeg/blob/a78f136f3fa039fd7ad664fd6e6e976f1448c68b/libavfilter/vf_setparams.c</a><br>[25] <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/RGB_color_model">https://en.wikipedia.org/wiki/RGB_color_model</a><br>[26] <a target="_blank" rel="noopener" href="https://wangwei1237.github.io/2020/02/28/Introduction-to-digital-video-technology/">https://wangwei1237.github.io/2020/02/28/Introduction-to-digital-video-technology/</a><br>[27] <a target="_blank" rel="noopener" href="https://www.spiedigitallibrary.org/ebooks/PM/Computational-Color-Technology/eISBN-9780819481085/10.1117/3.660835">https://www.spiedigitallibrary.org/ebooks/PM/Computational-Color-Technology/eISBN-9780819481085/10.1117/3.660835</a><br>[28] <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/HSL_and_HSV">https://en.wikipedia.org/wiki/HSL_and_HSV</a><br>[29] <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/142767122">https://zhuanlan.zhihu.com/p/142767122</a><br>[30] <a target="_blank" rel="noopener" href="https://www.rapidtables.com/convert/color/rgb-to-hsl.html">https://www.rapidtables.com/convert/color/rgb-to-hsl.html</a><br>[31] <a target="_blank" rel="noopener" href="https://github.com/wangwei1237/wangwei1237.github.io/blob/master/2022/08/14/Why-so-much-color-space-in-video/vf_hsl.c">https://github.com/wangwei1237/wangwei1237.github.io/blob/master/2022/08/14/Why-so-much-color-space-in-video/vf_hsl.c</a><br><a target="_blank" rel="noopener" href="https://m.thepaper.cn/baijiahao_19977611">https://m.thepaper.cn/baijiahao_19977611</a></p></blockquote></div><footer class="post-footer"><div class="post-nav"><div class="post-nav-item"><a href="/fa774eaa.html" rel="prev" title="CVPR 2023 | 即插即用的注意力模块 HAT: 激活更多有用的像素助力low-level任务显著涨点！"><i class="fa fa-chevron-left"></i> CVPR 2023 | 即插即用的注意力模块 HAT: 激活更多有用的像素助力low-level任务显著涨点！</a></div><div class="post-nav-item"><a href="/dc85b974.html" rel="next" title="设计模式-20软工第15周安排">设计模式-20软工第15周安排 <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="valine-comments"></div><script>window.addEventListener("tabs:register",()=>{let t=CONFIG.comments["activeClass"];var e;(t=CONFIG.comments.storage?localStorage.getItem("comments_active")||t:t)&&(e=document.querySelector(`a[href="#comment-${t}"]`))&&e.click()}),CONFIG.comments.storage&&window.addEventListener("tabs:click",t=>{t.target.matches(".tabs-comment .tab-content .tab-pane")&&(t=t.target.classList[1],localStorage.setItem("comments_active",t))})</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%86%E9%A2%91%E9%87%87%E9%9B%86"><span class="nav-number">1.</span> <span class="nav-text">视频采集</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ADC-%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7%E7%9A%84%E5%8F%96%E5%80%BC%E8%8C%83%E5%9B%B4"><span class="nav-number">2.</span> <span class="nav-text">ADC 数字信号的取值范围</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%86%E9%A2%91%E4%BC%BD%E9%A9%AC%E6%A0%A1%E6%AD%A3"><span class="nav-number">3.</span> <span class="nav-text">视频伽马校正</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RGB%E7%9A%84%E8%AE%BE%E5%A4%87%E4%BE%9D%E8%B5%96%E6%80%A7"><span class="nav-number">4.</span> <span class="nav-text">RGB的设备依赖性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%86%E9%A2%91%E5%8E%8B%E7%BC%A9"><span class="nav-number">5.</span> <span class="nav-text">视频压缩</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F"><span class="nav-number">6.</span> <span class="nav-text">注意</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%86%E9%A2%91%E8%BD%AC%E7%A0%81"><span class="nav-number">7.</span> <span class="nav-text">视频转码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%86%E9%A2%91%E8%A7%A3%E7%A0%81-amp-%E6%92%AD%E6%94%BE"><span class="nav-number">8.</span> <span class="nav-text">视频解码&amp;播放</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%98%BE%E7%A4%BA%E8%AE%BE%E5%A4%87%E5%92%8C%E7%9B%B8%E6%9C%BA%E7%9A%84%E8%89%B2%E5%9F%9F%E4%B8%8D%E4%B8%80%E8%87%B4"><span class="nav-number">8.1.</span> <span class="nav-text">显示设备和相机的色域不一致</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%86%E9%A2%91%E8%A7%82%E7%9C%8B"><span class="nav-number">9.</span> <span class="nav-text">视频观看</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">10.</span> <span class="nav-text">总结</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%9C%E8%80%85%E7%AE%80%E4%BB%8B"><span class="nav-number">11.</span> <span class="nav-text">作者简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="nav-number">12.</span> <span class="nav-text">参考资料</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Aisaka Aoi" src="/images/manatsu.jpg"><p class="site-author-name" itemprop="name">Aisaka Aoi</p><div class="site-description" itemprop="description">逢坂葵的个人博客</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">1007</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">20</span> <span class="site-state-item-name">分类</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/AisakaAoi" title="GitHub 👨‍💻 → https:&#x2F;&#x2F;github.com&#x2F;AisakaAoi" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub 👨‍💻</a> </span><span class="links-of-author-item"><a href="https://github.com/Aisakaorz" title="GitHub 👩‍💻 → https:&#x2F;&#x2F;github.com&#x2F;Aisakaorz" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub 👩‍💻</a> </span><span class="links-of-author-item"><a href="mailto:aisakaaoi@qq.com" title="E-Mail 📧 → mailto:aisakaaoi@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail 📧</a> </span><span class="links-of-author-item"><a href="mailto:chenzongnan@m.scnu.edu.cn" title="E-Mail 🏫 → mailto:chenzongnan@m.scnu.edu.cn" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail 🏫</a> </span><span class="links-of-author-item"><a href="https://space.bilibili.com/91560309" title="Bilibili 📺 → https:&#x2F;&#x2F;space.bilibili.com&#x2F;91560309" rel="noopener" target="_blank"><i class="fab fa-bilibili fa-fw"></i>Bilibili 📺</a> </span><span class="links-of-author-item"><a href="https://space.bilibili.com/198562921" title="Bilibili 🎮 → https:&#x2F;&#x2F;space.bilibili.com&#x2F;198562921" rel="noopener" target="_blank"><i class="fab fa-bilibili fa-fw"></i>Bilibili 🎮</a> </span><span class="links-of-author-item"><a href="https://www.youtube.com/channel/UCALvyn5Cl76GCotO9pczvjg" title="YouTube 📺 → https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCALvyn5Cl76GCotO9pczvjg" rel="noopener" target="_blank"><i class="fab fa-youtube fa-fw"></i>YouTube 📺</a></span></div></div><div class="back-to-top motion-element"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2026</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Aisaka Aoi</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-chart-area"></i> </span><span class="post-meta-item-text">站点总字数：</span> <span title="站点总字数">3.5m</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span class="post-meta-item-text">站点阅读时长 &asymp;</span> <span title="站点阅读时长">146:07</span></div><div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动</div></div></footer></div><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><script>document.querySelectorAll(".pdfobject-container").forEach(e=>{var t=e.dataset.target,a="#"+Object.entries({navpanes:0,toolbar:0,statusbar:0,pagemode:"thumbs",view:"FitH"}).map(([e,t])=>e+"="+encodeURIComponent(t)).join("&"),r="/lib/pdf/web/viewer.html?file="+encodeURIComponent(t)+a;NexT.utils.supportsPDFs()?e.innerHTML=`<embed class="pdfobject" src="${t+a}" type="application/pdf" style="height: ${e.dataset.height};">`:e.innerHTML=`<iframe src="${r}" style="height: ${e.dataset.height};" frameborder="0"></iframe>`})</script><script>NexT.utils.loadComments(document.querySelector("#valine-comments"),()=>{NexT.utils.getScript("//unpkg.com/valine/dist/Valine.min.js",()=>{var i=["nick","mail","link"],e="nick,mail,link".split(",").filter(e=>i.includes(e));new Valine({el:"#valine-comments",verify:!0,notify:!0,appId:"UqjWdRYbIUEUQRXhBUUIh1QE-gzGzoHsz",appKey:"gj89JXC485PFbpdHLKVkz6dm",placeholder:"这里可以发送评论~（上面可以输入昵称、邮箱）",avatar:"mm",meta:e,pageSize:"10",visitor:!0,lang:"zh-cn",path:location.pathname,recordIP:!1,serverURLs:""})},window.Valine)})</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/assets/haru02.model.json"},"display":{"position":"right","width":208,"height":520},"mobile":{"show":false},"log":false});</script></body></html>