<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0"><meta name="baidu-site-verification" content="code-KCMz4b3cnd"><meta name="google-site-verification" content="MTp8U7dJ1uzrfz8Mu6rgqX1CIm3HjqPWd0xaRcv1tFg"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="mask-icon" href="/images/favicon.png" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"aisakaaoi.github.io",root:"/",scheme:"Pisces",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!1,show_result:!1,style:null},back2top:{enable:!0,sidebar:!0,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:"valine",storage:!0,lazyload:!1,nav:null,activeClass:"valine"},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="è§†é¢‘æ’­æ”¾å™¨çš„åŸç†éŸ³è§†é¢‘æŠ€æœ¯ä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ç‚¹ï¼šå°è£…æŠ€æœ¯ã€è§†é¢‘å‹ç¼©ç¼–ç æŠ€æœ¯ã€éŸ³é¢‘å‹ç¼©ç¼–ç æŠ€æœ¯ã€æµåª’ä½“åè®®æŠ€æœ¯ï¼ˆå¦‚æœè€ƒè™‘åˆ°ç½‘ç»œä¼ è¾“çš„è¯ï¼‰ã€‚ è§†é¢‘æ’­æ”¾å™¨æ’­æ”¾ä¸€ä¸ªäº’è”ç½‘ä¸Šçš„è§†é¢‘æ–‡ä»¶ï¼Œéœ€è¦ç»è¿‡ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼šè§£åè®®ï¼Œè§£å°è£…ï¼Œè§£ç éŸ³è§†é¢‘ï¼ŒéŸ³è§†é¢‘åŒæ­¥ã€‚ æ’­æ”¾æœ¬åœ°æ–‡ä»¶åˆ™ä¸éœ€è¦è§£åè®®ï¼Œä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼šè§£å°è£…ï¼Œè§£ç éŸ³è§†é¢‘ï¼ŒéŸ³è§†é¢‘åŒæ­¥ã€‚"><meta property="og:type" content="article"><meta property="og:title" content="Android-éŸ³è§†é¢‘-è§†é¢‘å¼€å‘-ï¼ˆä¸‰ï¼‰è§†é¢‘æ’­æ”¾"><meta property="og:url" content="https://aisakaaoi.github.io/47f70dd6.html"><meta property="og:site_name" content="é€¢å‚è‘µçš„ä¸ªäººåšå®¢"><meta property="og:description" content="è§†é¢‘æ’­æ”¾å™¨çš„åŸç†éŸ³è§†é¢‘æŠ€æœ¯ä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ç‚¹ï¼šå°è£…æŠ€æœ¯ã€è§†é¢‘å‹ç¼©ç¼–ç æŠ€æœ¯ã€éŸ³é¢‘å‹ç¼©ç¼–ç æŠ€æœ¯ã€æµåª’ä½“åè®®æŠ€æœ¯ï¼ˆå¦‚æœè€ƒè™‘åˆ°ç½‘ç»œä¼ è¾“çš„è¯ï¼‰ã€‚ è§†é¢‘æ’­æ”¾å™¨æ’­æ”¾ä¸€ä¸ªäº’è”ç½‘ä¸Šçš„è§†é¢‘æ–‡ä»¶ï¼Œéœ€è¦ç»è¿‡ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼šè§£åè®®ï¼Œè§£å°è£…ï¼Œè§£ç éŸ³è§†é¢‘ï¼ŒéŸ³è§†é¢‘åŒæ­¥ã€‚ æ’­æ”¾æœ¬åœ°æ–‡ä»¶åˆ™ä¸éœ€è¦è§£åè®®ï¼Œä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼šè§£å°è£…ï¼Œè§£ç éŸ³è§†é¢‘ï¼ŒéŸ³è§†é¢‘åŒæ­¥ã€‚"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://aisakaaoi.github.io/47f70dd6/1.webp"><meta property="og:image" content="https://aisakaaoi.github.io/47f70dd6/2.webp"><meta property="og:image" content="https://aisakaaoi.github.io/47f70dd6/3.webp"><meta property="og:image" content="https://aisakaaoi.github.io/47f70dd6/4.webp"><meta property="og:image" content="https://aisakaaoi.github.io/47f70dd6/5.webp"><meta property="og:image" content="https://aisakaaoi.github.io/47f70dd6/6.webp"><meta property="og:image" content="https://aisakaaoi.github.io/47f70dd6/7.webp"><meta property="og:image" content="https://aisakaaoi.github.io/47f70dd6/8.png"><meta property="og:image" content="https://aisakaaoi.github.io/47f70dd6/9.png"><meta property="og:image" content="https://aisakaaoi.github.io/47f70dd6/10.png"><meta property="og:image" content="https://aisakaaoi.github.io/47f70dd6/11.png"><meta property="article:published_time" content="2021-10-19T07:38:41.000Z"><meta property="article:modified_time" content="2026-01-23T11:02:37.169Z"><meta property="article:author" content="Aisaka Aoi"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://aisakaaoi.github.io/47f70dd6/1.webp"><link rel="canonical" href="https://aisakaaoi.github.io/47f70dd6.html"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>Android-éŸ³è§†é¢‘-è§†é¢‘å¼€å‘-ï¼ˆä¸‰ï¼‰è§†é¢‘æ’­æ”¾ | é€¢å‚è‘µçš„ä¸ªäººåšå®¢</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script"),t=(e.src="https://hm.baidu.com/hm.js?7308ed05421777c301eefa3754da1b42",document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="é€¢å‚è‘µçš„ä¸ªäººåšå®¢" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ "><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">aoiå­¦é™¢</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">Aisaka's Blog, School of Aoi, Aisaka University</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»<span class="badge">20</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£<span class="badge">1034</span></a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="æœç´¢..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="reading-progress-bar"></div><a href="https://github.com/AisakaAoi" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://aisakaaoi.github.io/47f70dd6.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/manatsu.jpg"><meta itemprop="name" content="Aisaka Aoi"><meta itemprop="description" content="Aisaka's Blog, School of Aoi, Aisaka University"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="é€¢å‚è‘µçš„ä¸ªäººåšå®¢"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Android-éŸ³è§†é¢‘-è§†é¢‘å¼€å‘-ï¼ˆä¸‰ï¼‰è§†é¢‘æ’­æ”¾</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">å‘è¡¨äº</span> <time title="åˆ›å»ºæ—¶é—´ï¼š2021-10-19 15:38:41" itemprop="dateCreated datePublished" datetime="2021-10-19T15:38:41+08:00">2021-10-19</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">åˆ†ç±»äº</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%F0%9F%8C%99%E9%80%A2%E5%9D%82%E6%9D%82%E8%B0%88%E4%B8%8E%E6%90%AC%E8%BF%90/" itemprop="url" rel="index"><span itemprop="name">ğŸŒ™é€¢å‚æ‚è°ˆä¸æ¬è¿</span></a> </span>ï¼Œ <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%F0%9F%8C%99%E9%80%A2%E5%9D%82%E6%9D%82%E8%B0%88%E4%B8%8E%E6%90%AC%E8%BF%90/%E2%AD%90%E4%B8%80%E4%BA%9B%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">â­ä¸€äº›æŠ€æœ¯</span></a> </span></span><span id="/47f70dd6.html" class="post-meta-item leancloud_visitors" data-flag-title="Android-éŸ³è§†é¢‘-è§†é¢‘å¼€å‘-ï¼ˆä¸‰ï¼‰è§†é¢‘æ’­æ”¾" title="é˜…è¯»æ¬¡æ•°"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span> <span class="leancloud-visitors-count"></span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Valineï¼š</span> <a title="valine" href="/47f70dd6.html#valine-comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/47f70dd6.html" itemprop="commentCount"></span></a></span><br><span class="post-meta-item" title="æœ¬æ–‡å­—æ•°"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span> <span>17k</span> </span><span class="post-meta-item" title="é˜…è¯»æ—¶é•¿"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span> <span>44 åˆ†é’Ÿ</span></span></div></header><div class="post-body" itemprop="articleBody"><h3 id="è§†é¢‘æ’­æ”¾å™¨çš„åŸç†"><a href="#è§†é¢‘æ’­æ”¾å™¨çš„åŸç†" class="headerlink" title="è§†é¢‘æ’­æ”¾å™¨çš„åŸç†"></a>è§†é¢‘æ’­æ”¾å™¨çš„åŸç†</h3><p>éŸ³è§†é¢‘æŠ€æœ¯ä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ç‚¹ï¼šå°è£…æŠ€æœ¯ã€è§†é¢‘å‹ç¼©ç¼–ç æŠ€æœ¯ã€éŸ³é¢‘å‹ç¼©ç¼–ç æŠ€æœ¯ã€æµåª’ä½“åè®®æŠ€æœ¯ï¼ˆå¦‚æœè€ƒè™‘åˆ°ç½‘ç»œä¼ è¾“çš„è¯ï¼‰ã€‚</p><p>è§†é¢‘æ’­æ”¾å™¨æ’­æ”¾ä¸€ä¸ª<strong>äº’è”ç½‘ä¸Šçš„è§†é¢‘æ–‡ä»¶</strong>ï¼Œéœ€è¦ç»è¿‡ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š<strong>è§£åè®®ï¼Œè§£å°è£…ï¼Œè§£ç éŸ³è§†é¢‘ï¼ŒéŸ³è§†é¢‘åŒæ­¥</strong>ã€‚</p><p>æ’­æ”¾<strong>æœ¬åœ°æ–‡ä»¶</strong>åˆ™ä¸éœ€è¦è§£åè®®ï¼Œä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š<strong>è§£å°è£…ï¼Œè§£ç éŸ³è§†é¢‘ï¼ŒéŸ³è§†é¢‘åŒæ­¥</strong>ã€‚</p><img src="/47f70dd6/1.webp"> <span id="more"></span><p><strong>è§£åè®®</strong>ï¼šå°†æµåª’ä½“åè®®çš„æ•°æ®ï¼Œè§£æä¸ºæ ‡å‡†çš„ç›¸åº”çš„å°è£…æ ¼å¼æ•°æ®ã€‚éŸ³è§†é¢‘åœ¨ç½‘ç»œä¸Šä¼ æ’­çš„æ—¶å€™ï¼Œå¸¸å¸¸é‡‡ç”¨å„ç§æµåª’ä½“åè®®ï¼Œä¾‹å¦‚HTTPã€RTMPã€MMSç­‰ç­‰ã€‚è¿™äº›åè®®åœ¨ä¼ è¾“éŸ³è§†é¢‘æ•°æ®çš„åŒæ—¶ï¼Œä¹Ÿä¼šä¼ è¾“ä¸€äº›ä¿¡ä»¤æ•°æ®ã€‚è¿™äº›ä¿¡ä»¤æ•°æ®åŒ…æ‹¬å¯¹æ’­æ”¾çš„æ§åˆ¶ï¼ˆæ’­æ”¾ï¼Œæš‚åœï¼Œåœæ­¢ï¼‰ï¼Œæˆ–è€…å¯¹ç½‘ç»œçŠ¶æ€çš„æè¿°ç­‰ã€‚è§£åè®®çš„è¿‡ç¨‹ä¸­ä¼šå»é™¤æ‰ä¿¡ä»¤æ•°æ®è€Œåªä¿ç•™éŸ³è§†é¢‘æ•°æ®ã€‚ä¾‹å¦‚ï¼Œé‡‡ç”¨RTMPåè®®ä¼ è¾“çš„æ•°æ®ï¼Œç»è¿‡è§£åè®®æ“ä½œåï¼Œè¾“å‡ºFLVæ ¼å¼çš„æ•°æ®ã€‚</p><p><strong>è§£å°è£…</strong>ï¼šå°†è¾“å…¥çš„å°è£…æ ¼å¼çš„æ•°æ®ï¼Œåˆ†ç¦»æˆä¸ºéŸ³é¢‘æµå‹ç¼©ç¼–ç æ•°æ®å’Œè§†é¢‘æµå‹ç¼©ç¼–ç æ•°æ®ã€‚å°è£…æ ¼å¼ç§ç±»å¾ˆå¤šï¼Œä¾‹å¦‚MP4ã€MKVã€RMVBã€TSã€FLVã€AVIç­‰ç­‰ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯å°†å·²ç»å‹ç¼©ç¼–ç çš„è§†é¢‘æ•°æ®å’ŒéŸ³é¢‘æ•°æ®æŒ‰ç…§ä¸€å®šçš„æ ¼å¼æ”¾åˆ°ä¸€èµ·ã€‚ä¾‹å¦‚ï¼ŒFLVæ ¼å¼çš„æ•°æ®ï¼Œç»è¿‡è§£å°è£…æ“ä½œåï¼Œè¾“å‡ºH.264ç¼–ç çš„è§†é¢‘ç æµå’ŒAACç¼–ç çš„éŸ³é¢‘ç æµã€‚</p><p><strong>è§£ç </strong>ï¼šå°†è§†é¢‘&#x2F;éŸ³é¢‘å‹ç¼©ç¼–ç æ•°æ®ï¼Œè§£ç æˆä¸ºéå‹ç¼©çš„è§†é¢‘&#x2F;éŸ³é¢‘åŸå§‹æ•°æ®ã€‚éŸ³é¢‘çš„å‹ç¼©ç¼–ç æ ‡å‡†åŒ…å«AACã€MP3ã€AC-3ç­‰ç­‰ï¼Œè§†é¢‘çš„å‹ç¼©ç¼–ç æ ‡å‡†åˆ™åŒ…å«H.264ã€MPEG2ã€VC-1ç­‰ç­‰ã€‚è§£ç æ˜¯æ•´ä¸ªç³»ç»Ÿä¸­æœ€é‡è¦ä¹Ÿæ˜¯æœ€å¤æ‚çš„ä¸€ä¸ªç¯èŠ‚ã€‚é€šè¿‡è§£ç ï¼Œå‹ç¼©ç¼–ç çš„è§†é¢‘æ•°æ®è¾“å‡ºæˆä¸ºéå‹ç¼©çš„é¢œè‰²æ•°æ®ï¼Œä¾‹å¦‚YUV420Pã€RGBç­‰ç­‰ï¼›å‹ç¼©ç¼–ç çš„éŸ³é¢‘æ•°æ®è¾“å‡ºæˆä¸ºéå‹ç¼©çš„éŸ³é¢‘æŠ½æ ·æ•°æ®ï¼Œä¾‹å¦‚PCMæ•°æ®ã€‚</p><p><strong>éŸ³è§†é¢‘åŒæ­¥</strong>ï¼šæ ¹æ®è§£å°è£…æ¨¡å—å¤„ç†è¿‡ç¨‹ä¸­è·å–åˆ°çš„å‚æ•°ä¿¡æ¯ï¼ŒåŒæ­¥è§£ç å‡ºæ¥çš„è§†é¢‘å’ŒéŸ³é¢‘æ•°æ®ï¼Œå¹¶å°†è§†é¢‘éŸ³é¢‘æ•°æ®é€è‡³ç³»ç»Ÿçš„æ˜¾å¡å’Œå£°å¡æ’­æ”¾å‡ºæ¥ã€‚</p><hr><h3 id="MediaPlayer"><a href="#MediaPlayer" class="headerlink" title="MediaPlayer"></a>MediaPlayer</h3><img src="/47f70dd6/2.webp"><h4 id="MediaPlayerç”Ÿå‘½å‘¨æœŸ"><a href="#MediaPlayerç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="MediaPlayerç”Ÿå‘½å‘¨æœŸ"></a>MediaPlayerç”Ÿå‘½å‘¨æœŸ</h4><ol><li><p><strong>Idleï¼ˆé—²ç½®ï¼‰çŠ¶æ€ä¸Endï¼ˆç»“æŸï¼‰çŠ¶æ€</strong></p><p>MediaPlayer å¯¹è±¡å£°æ˜å‘¨æœŸ : ä» Idle åˆ° End çŠ¶æ€å°±æ˜¯ MediaPlayer æ•´ä¸ªç”Ÿå‘½å‘¨æœŸ<br>ç”Ÿå‘½å‘¨æœŸ<strong>å¼€å§‹</strong>: è¿›å…¥ Idle (é—²ç½®) çŠ¶æ€<br>ç”Ÿå‘½å‘¨æœŸ<strong>ç»“æŸ</strong>: è¿›å…¥ End (ç»“æŸ) çŠ¶æ€</p><p><strong>Idle å’Œ End çŠ¶æ€è½¬æ¢ï¼š</strong><br>è¿›å…¥ Idle çŠ¶æ€ï¼šnew MediaPlayer() æˆ–è€… ä»»ä½•çŠ¶æ€è°ƒç”¨äº† reset() æ–¹æ³•ä¹‹åï¼Œè¿›å…¥ Idle (é—²ç½®) çŠ¶æ€<br>è¿›å…¥ End çŠ¶æ€ï¼šåœ¨ Idle çŠ¶æ€è°ƒç”¨ release() æ–¹æ³•åï¼Œä¼šè¿›å…¥ End (ç»“æŸ) çŠ¶æ€ï¼ˆæ¶‰åŠåˆ°èµ„æºçš„é‡Šæ”¾ï¼‰ï¼Œä¸èƒ½è½¬æ¢ä¸ºå…¶ä»–çŠ¶æ€<br><strong>æ³¨æ„ï¼šcreate()åˆå§‹åŒ–çš„MediaPlayerç›´æ¥è¿›å…¥PreparedçŠ¶æ€</strong></p></li><li><p><strong>Errorï¼ˆé”™è¯¯ï¼‰çŠ¶æ€</strong></p><p><strong>ErrorçŠ¶æ€è½¬æ¢ï¼š</strong><br>è¿›å…¥ErrorçŠ¶æ€ï¼šæ£€æµ‹åˆ°å¼‚å¸¸ï¼Œç³»ç»Ÿå›è°ƒonError()è¿›å…¥ErrorçŠ¶æ€<br>ç¦»å¼€ErrorçŠ¶æ€ï¼šå¯ä»¥ä½¿ç”¨reset()å›åˆ°IdleçŠ¶æ€<br>æ³¨å†Œç›‘å¬ï¼šæ³¨å†Œä¸€ä¸ª OnErrorListener ç›‘å¬å™¨é‡å†™OnError(), ç”¨äºè·å–æ’­æ”¾å™¨å¼•æ“å†…éƒ¨å‘ç”Ÿçš„é”™è¯¯<br>æ³¨å†Œæ–¹æ³•ï¼šè°ƒç”¨ MediaPlayer.setOnErrorListener(OnErrorListener) æ–¹æ³•ï¼Œæ³¨å†Œ OnErrorListener</p></li><li><p><strong>Initialized(åˆå§‹åŒ–)çŠ¶æ€</strong></p><p><strong>Initialized çŠ¶æ€è½¬æ¢ï¼š</strong><br>åœ¨ Idle çŠ¶æ€è°ƒç”¨ setDataSource() æ–¹æ³•ï¼ŒMediaPlayer ä¼šè¿ç§»åˆ° Initialized çŠ¶æ€<br>æ³¨æ„ï¼šåªèƒ½åœ¨ Idle çŠ¶æ€è°ƒç”¨è¯¥æ–¹æ³•ï¼Œå¦‚æœåœ¨å…¶å®ƒçŠ¶æ€è°ƒç”¨è¯¥æ–¹æ³•ï¼Œä¼šæŠ¥å‡º IllegalStateException å¼‚å¸¸</p></li><li><p><strong>Prepared(å°±ç»ª)å’ŒPreparing(å‡†å¤‡ä¸­)çŠ¶æ€</strong></p><p><strong>PreparedçŠ¶æ€è½¬ç§»(ä¸¤ç§æ–¹å¼)</strong><br>InitializedçŠ¶æ€è°ƒç”¨ prepared() è¿›å…¥PreparedçŠ¶æ€ï¼ˆåŒæ­¥æ“ä½œï¼Œè‹¥æ•°æ®é‡è¾ƒå¤§åˆ™å®¹æ˜“é€ æˆä¸»çº¿ç¨‹é˜»å¡ç”šè‡³ANRï¼‰<br>InitializedçŠ¶æ€è°ƒç”¨ prepareAsync() è¿›å…¥PreparingçŠ¶æ€ï¼Œæ³¨å†ŒOnPreparedListener.OnPrepared()ï¼Œåœ¨å°†å‡†å¤‡å°±ç»ªåçš„æ“ä½œæ”¾ç½®OnPrepared()ä¸­ï¼ˆå¼‚æ­¥æ“ä½œï¼Œä¾¿äºæ“çºµæ•°æ®é‡å¤§çš„æƒ…å†µï¼Œé¿å…ä¸»çº¿ç¨‹é˜»å¡ï¼‰</p></li><li><p><strong>Startedï¼ˆå¼€å§‹ï¼‰çŠ¶æ€</strong></p><p><strong>StartedçŠ¶æ€è½¬ç§»ï¼š</strong><br>PreparedçŠ¶æ€è°ƒç”¨start()è¿›å…¥StartedçŠ¶æ€<br>åˆ¤æ–­MediaPlayeræ˜¯å¦åœ¨StartedçŠ¶æ€ï¼šisPlaying():boolean<br>è·Ÿè¸ªç¼“å†²çŠ¶æ€ï¼šåœ¨ Started çŠ¶æ€ï¼Œè°ƒç”¨ OnBufferingUpdateListener.onBufferingUpdate() æ–¹æ³•ï¼Œå¯ä»¥è·å–è§†é¢‘éŸ³é¢‘æµçš„ç¼“å†²çŠ¶æ€</p></li><li><p><strong>Pausedï¼ˆæš‚åœï¼‰çŠ¶æ€</strong></p><p><strong>PausedçŠ¶æ€è½¬ç§»ï¼š</strong><br>StartedçŠ¶æ€è°ƒç”¨paused()è¿›å…¥PausedçŠ¶æ€<br>PausedçŠ¶æ€è°ƒç”¨start()è¿›å…¥StartedçŠ¶æ€</p></li><li><p><strong>StopçŠ¶æ€</strong></p><p><strong>StopçŠ¶æ€è½¬ç§»ï¼š</strong><br>åœ¨ Preparedã€Startedã€Pausedã€PlaybackCompleted çŠ¶æ€ä¸‹ è°ƒç”¨ stop() æ–¹æ³•ï¼ŒMediaPlayer ä¼šè¿ç§»åˆ° Stopped çŠ¶æ€<br><strong>æ³¨æ„StopçŠ¶æ€ä¸èƒ½ç›´æ¥start()ï¼Œè¦å›åˆ°preparedçŠ¶æ€ï¼ˆprepare()æˆ–prepareAsyn()ï¼‰ï¼Œæ‰èƒ½start</strong></p></li><li><p><strong>æ’­æ”¾ä½ç½®è°ƒæ•´seekTo()</strong></p><p>è¯¥æ–¹æ³•å¼‚æ­¥ï¼Œè°ƒç”¨åæ’­æ”¾å™¨å¼•æ“è¿˜éœ€è¦è¿›è¡Œå…¶å®ƒæ“ä½œï¼Œè·³è½¬æ‰èƒ½å®Œæˆ<br>è¿›è¡Œçš„æ“ä½œï¼šæ’­æ”¾å™¨å¼•æ“ä¼šå›è°ƒ OnSeekComplete.onSeekComplete()æ–¹æ³•ï¼Œè¯¥æ–¹æ³•é€šè¿‡ setOnSeekCompleteListener() æ–¹æ³•æ³¨å†Œ<br>è·å–æ’­æ”¾ä½ç½®ï¼šè°ƒç”¨ getCurrentPosition() æ–¹æ³•ï¼Œå¯ä»¥è·å–å½“å‰æ’­æ”¾çš„ä½ç½®ï¼Œå¯ä»¥å¸®åŠ©æ’­æ”¾å™¨æ›´æ–°è¿›åº¦æ¡</p></li><li><p><strong>PlaybackCompleted (æ’­æ”¾å®Œæ¯•) çŠ¶æ€</strong></p><p><strong>PlaybackCompleted çŠ¶æ€è½¬ç§»ï¼š</strong><br>å¦‚æœè®¾ç½®äº†å¾ªç¯æ¨¡å¼SetLooping()ï¼Œé‚£ä¹ˆæ’­æ”¾å®Œæ¯•ä¹‹åä¼šé‡æ–°è¿›å…¥StartedçŠ¶æ€ï¼›è‹¥æ²¡è®¾ç½®å¾ªç¯ï¼Œåˆ™è°ƒç”¨ OnCompletion.onCompletion() å›è°ƒæ–¹æ³•ï¼ŒMediaPlayer ä¼šè¿›å…¥ PlaybackCompleted çŠ¶æ€<br>ä¹Ÿå¯ä»¥åœ¨è¯¥çŠ¶æ€ç›´æ¥è°ƒç”¨start()è¿›å…¥StartedçŠ¶æ€</p></li></ol><h4 id="MediaPlayerå®ç°æ­¥éª¤æ—¶åºå›¾"><a href="#MediaPlayerå®ç°æ­¥éª¤æ—¶åºå›¾" class="headerlink" title="MediaPlayerå®ç°æ­¥éª¤æ—¶åºå›¾"></a>MediaPlayerå®ç°æ­¥éª¤æ—¶åºå›¾</h4><img src="/47f70dd6/3.webp"><h4 id="æ’­æ”¾è§†é¢‘"><a href="#æ’­æ”¾è§†é¢‘" class="headerlink" title="æ’­æ”¾è§†é¢‘"></a>æ’­æ”¾è§†é¢‘</h4><ol><li><p>ç³»ç»Ÿè‡ªå¸¦çš„æ’­æ”¾å™¨</p><p>é€šè¿‡intentçš„æ–¹å¼ï¼Œè°ƒç”¨ç³»ç»Ÿè‡ªå¸¦çš„æ’­æ”¾å™¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Uri</span> <span class="variable">uri</span> <span class="operator">=</span> Uri.parse(<span class="string">&quot;/storage/emulated/0/DCIM/Camera/test.mp4&quot;</span>); </span><br><span class="line"><span class="comment">// è°ƒç”¨ç³»ç»Ÿè‡ªå¸¦çš„æ’­æ”¾å™¨</span></span><br><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.ACTION_VIEW);</span><br><span class="line">intent.setDataAndType(uri, <span class="string">&quot;video/mp4&quot;</span>);</span><br><span class="line">startActivity(intent);</span><br></pre></td></tr></table></figure></li><li><p>VideoView+MediaController</p><p>VideoViewç»§æ‰¿äº†SurfaceViewåŒæ—¶å®ç°äº†MediaPlayerControlæ¥å£ï¼ŒMediaControlleråˆ™æ˜¯å®‰å“å°è£…çš„è¾…åŠ©æ§åˆ¶å™¨ï¼Œå¸¦æœ‰æš‚åœï¼Œæ’­æ”¾ï¼Œåœæ­¢ï¼Œè¿›åº¦æ¡ç­‰æ§ä»¶ã€‚é€šè¿‡VideoView+MediaControllerå¯ä»¥å¾ˆè½»æ¾çš„å®ç°è§†é¢‘æ’­æ”¾ã€åœæ­¢ã€å¿«è¿›ã€å¿«é€€ç­‰åŠŸèƒ½ã€‚</p><p>VideoViewæ˜¯åŒ…è£…è¿‡çš„MediaPlayerï¼Œæ‰€ä»¥ä½¿ç”¨èµ·æ¥å¾ˆç›¸ä¼¼<br>1)è°ƒç”¨setVideoPath()å»è®¾ç½®è§†é¢‘æ–‡ä»¶è·¯å¾„ï¼ˆésetDataSourceï¼‰<br>2)newä¸€ä¸ªMediaController<br>3)videoView.setMediaController(mediaController)è®¾ç½®åª’ä½“æ§åˆ¶å™¨<br>4)videoView.requestFocus()è¯·æ±‚ç„¦ç‚¹åstart()</p><p>è¿˜å¯ä»¥è®¾ç½®videoView.setOnCompletionListenerã€videoView.setOnBufferingUpdateListenerç­‰å›è°ƒå‡½æ•°</p></li><li><p>SurfaceView+MediaPlayer+MediaController&#x2F;è‡ªå®šä¹‰æ§åˆ¶å™¨</p><p>1)åœ¨ç•Œé¢å¸ƒå±€æ–‡ä»¶ä¸­å®šä¹‰SurfaceViewç»„ä»¶ï¼Œå¹¶ä¸ºSurfaceViewçš„SurfaceHolderæ·»åŠ Callbackç›‘å¬å™¨<br>2)åˆ›å»ºMediaPlayerå¯¹è±¡ï¼Œå¹¶setDataSource()è®©å®ƒåŠ è½½æŒ‡å®šçš„è§†é¢‘æ–‡ä»¶<br>3)è°ƒç”¨MediaPlayerå¯¹è±¡çš„setDisplay(SurfaceHolder sh)å°†æ‰€æ’­æ”¾çš„è§†é¢‘å›¾åƒè¾“å‡ºåˆ°æŒ‡å®šçš„SurfaceViewç»„ä»¶<br>4)è°ƒç”¨MediaPlayerå¯¹è±¡çš„prepareAsync()æˆ–prepare()æ–¹æ³•è£…è½½æµåª’ä½“æ–‡ä»¶<br>5)è°ƒç”¨MediaPlayerå¯¹è±¡çš„start()ã€stop()å’Œpause()æ–¹æ³•æ¥æ§åˆ¶è§†é¢‘çš„æ’­æ”¾</p><p>SurfaceViewä¾‹å­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyPlayer</span> <span class="keyword">implements</span> <span class="title class_">MediaPlayer</span>.OnPreparedListener, MediaPlayer.OnErrorListener, MediaPlayer.OnCompletionListener &#123;</span><br><span class="line">    <span class="keyword">private</span> MediaPlayer mPlayer;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> hasPrepared;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initIfNecessary</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> == mPlayer) &#123;</span><br><span class="line">            mPlayer = <span class="keyword">new</span> <span class="title class_">MediaPlayer</span>();</span><br><span class="line">            mPlayer.setOnErrorListener(<span class="built_in">this</span>);</span><br><span class="line">            mPlayer.setOnCompletionListener(<span class="built_in">this</span>);</span><br><span class="line">            mPlayer.setOnPreparedListener(<span class="built_in">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">play</span><span class="params">(Context context, Uri dataSource)</span> &#123;</span><br><span class="line">        hasPrepared = <span class="literal">false</span>; <span class="comment">// å¼€å§‹æ’­æ”¾å‰è®²Flagç½®ä¸ºä¸å¯æ“ä½œ</span></span><br><span class="line">        initIfNecessary(); <span class="comment">// å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡æ’­æ”¾/playerå·²ç»é‡Šæ”¾äº†ï¼Œå°±ä¼šé‡æ–°åˆ›å»ºã€åˆå§‹åŒ–</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            mPlayer.reset();</span><br><span class="line">            mPlayer.setDataSource(context, dataSource); <span class="comment">// è®¾ç½®æ›²ç›®èµ„æº</span></span><br><span class="line">            mPlayer.prepareAsync(); <span class="comment">// å¼‚æ­¥çš„å‡†å¤‡æ–¹æ³•</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">start</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// release()ä¼šé‡Šæ”¾playerã€å°†playerç½®ç©ºï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦åˆ¤æ–­ä¸€ä¸‹</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> != mPlayer &amp;&amp; hasPrepared) &#123;</span><br><span class="line">            mPlayer.start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pause</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> != mPlayer &amp;&amp; hasPrepared) &#123;</span><br><span class="line">            mPlayer.pause();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">seekTo</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> != mPlayer &amp;&amp; hasPrepared) &#123;</span><br><span class="line">            mPlayer.seekTo(position);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯¹äºæ’­æ”¾è§†é¢‘æ¥è¯´ï¼Œé€šè¿‡è®¾ç½®SurfaceHolderæ¥è®¾ç½®æ˜¾ç¤ºSurfaceã€‚è¿™ä¸ªæ–¹æ³•ä¸éœ€è¦åˆ¤æ–­çŠ¶æ€ã€ä¹Ÿä¸ä¼šæ”¹å˜playerçŠ¶æ€</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDisplay</span><span class="params">(SurfaceHolder holder)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> != mPlayer) &#123;</span><br><span class="line">            mPlayer.setDisplay(holder);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">release</span><span class="params">()</span> &#123;</span><br><span class="line">        hasPrepared = <span class="literal">false</span>;</span><br><span class="line">        mPlayer.stop();</span><br><span class="line">        mPlayer.release();</span><br><span class="line">        mPlayer = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onPrepared</span><span class="params">(MediaPlayer mp)</span> &#123;</span><br><span class="line">        hasPrepared = <span class="literal">true</span>; <span class="comment">// å‡†å¤‡å®Œæˆåå›è°ƒåˆ°è¿™é‡Œ</span></span><br><span class="line">        start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCompletion</span><span class="params">(MediaPlayer mp)</span> &#123;</span><br><span class="line">        hasPrepared = <span class="literal">false</span>;</span><br><span class="line">        <span class="comment">// é€šçŸ¥è°ƒç”¨å¤„ï¼Œè°ƒç”¨play()æ–¹æ³•è¿›è¡Œä¸‹ä¸€ä¸ªæ›²ç›®çš„æ’­æ”¾</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onError</span><span class="params">(MediaPlayer mp, <span class="type">int</span> what, <span class="type">int</span> extra)</span> &#123;</span><br><span class="line">        hasPrepared = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>TextureView+MediaPlayer+MediaController&#x2F;è‡ªå®šä¹‰æ§åˆ¶å™¨</p><p>å› ä¸ºSurfaceViewçš„å†…å®¹ä¸åœ¨åº”ç”¨çª—å£ä¸Šï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨å˜æ¢ï¼ˆå¹³ç§»ã€ç¼©æ”¾ã€æ—‹è½¬ç­‰ï¼‰ã€‚ä¹Ÿéš¾ä»¥æ”¾åœ¨ListViewæˆ–è€…ScrollViewä¸­ï¼Œä¸èƒ½ä½¿ç”¨UIæ§ä»¶çš„ä¸€äº›ç‰¹æ€§æ¯”å¦‚View.setAlpha()ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ Android 4.0ä¸­å¼•å…¥äº†TextureViewã€‚</p><p>1)åœ¨ç•Œé¢å¸ƒå±€æ–‡ä»¶ä¸­å®šä¹‰TextureViewç»„ä»¶ï¼Œå¹¶ä¸ºTextureViewçš„æ·»åŠ å›è°ƒmTextureView.setSurfaceTextureListener<br>2)åœ¨onSurfaceTextureAvailableå›è°ƒé‡Œå–å‡ºSurfaceTextureï¼šmSurface &#x3D; new Surface(surface);<br>3)åˆ›å»ºMediaPlayerå¯¹è±¡ï¼Œå¹¶setDataSource()è®©å®ƒåŠ è½½æŒ‡å®šçš„è§†é¢‘æ–‡ä»¶<br>4)è°ƒç”¨MediaPlayerå¯¹è±¡çš„setSurface(mSurface)å°†æ‰€æ’­æ”¾çš„è§†é¢‘å›¾åƒè¾“å‡ºæŒ‡å®š<br>5)è°ƒç”¨MediaPlayerå¯¹è±¡çš„prepareAsync()æˆ–prepare()æ–¹æ³•è£…è½½æµåª’ä½“æ–‡ä»¶<br>6)è°ƒç”¨MediaPlayerå¯¹è±¡çš„start()ã€stop()å’Œpause()æ–¹æ³•æ¥æ§åˆ¶è§†é¢‘çš„æ’­æ”¾</p><p>è¡¥å……ï¼šmMediaPlayer.setOnPreparedListenerã€mMediaPlayer.setOnCompletionListenerç­‰å›è°ƒå¯è‡ªå®šä¹‰æ·»åŠ </p></li></ol><hr><h3 id="ExoPlayerï¼ˆä¸“æ³¨äºAndroidï¼‰"><a href="#ExoPlayerï¼ˆä¸“æ³¨äºAndroidï¼‰" class="headerlink" title="ExoPlayerï¼ˆä¸“æ³¨äºAndroidï¼‰"></a>ExoPlayerï¼ˆä¸“æ³¨äºAndroidï¼‰</h3><h4 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h4><p>ExoPlayeræ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨çº§åª’ä½“æ’­æ”¾å™¨é¡¹ç›®ï¼Œæ„å»ºåœ¨Androidçš„ä½çº§åª’ä½“APIä¹‹ä¸Šï¼Œå®ƒæä¾›äº†Androidçš„MediaPlayer APIçš„æ›¿ä»£æ–¹æ³•ï¼Œç”¨äºåœ¨æœ¬åœ°å’Œé€šè¿‡Internetæ’­æ”¾éŸ³é¢‘å’Œè§†é¢‘ã€‚</p><p>ExoPlayeræ”¯æŒAndroidçš„MediaPlayer APIç›®å‰ä¸æ”¯æŒçš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬DASHå’ŒSmoothStreamingè‡ªé€‚åº”æ’­æ”¾ã€‚ ä¸MediaPlayer APIä¸åŒï¼ŒExoPlayeræ˜“äºè‡ªå®šä¹‰å’Œæ‰©å±•ã€‚</p><p>ExoPlayeråº“çš„æ ¸å¿ƒæ˜¯Exoplayeræ¥å£ï¼ŒExoplayerå…¬å¼€äº†ä¼ ç»Ÿçš„é«˜çº§åª’ä½“æ’­æ”¾å™¨åŠŸèƒ½ï¼Œä¾‹å¦‚ç¼“å†²åª’ä½“ã€æ’­æ”¾ã€æš‚åœå’Œseekç­‰åŠŸèƒ½ï¼ŒExoPlayeré€šè¿‡ç»„ä»¶å®ç°å…¶å®ƒé«˜çº§åŠŸèƒ½ã€‚</p><p>MediaSourceï¼šå®šä¹‰å¤šåª’ä½“æ•°æ®æºï¼Œä»Uriä¸­è¯»å–æ•°æ®ï¼Œä¼ å…¥ExoPlayer<br>TrackSelectorï¼šè½¨é“æå–å™¨ï¼Œä»MediaSourceä¸­æå–å„ä¸ªè½¨é“çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œäº¤ç»™Renderæ¸²æŸ“<br>LoadControlï¼šå¯ä»¥æ§åˆ¶MediaSourceï¼Œæ¯”å¦‚ä»€ä¹ˆæ—¶å€™å¼€å§‹ç¼“å†²ï¼Œç¼“å†²å¤šå°‘ä¹‹åæš‚åœç¼“å†²</p><h4 id="ä¼˜ç¼ºç‚¹"><a href="#ä¼˜ç¼ºç‚¹" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h4><p>ä¸Androidå†…ç½®çš„MediaPlayerç›¸æ¯”ï¼ŒExoPlayerå…·æœ‰è®¸å¤šä¼˜ç‚¹ï¼š</p><ol><li><p>æ”¯æŒé€šè¿‡HTTPï¼ˆDASHï¼‰å’ŒSmoothStreamingè¿›è¡ŒåŠ¨æ€è‡ªé€‚åº”æµï¼Œè¿™ä¸¤ç§éƒ½ä¸å—MediaPlayerçš„æ”¯æŒ</p></li><li><p>èƒ½å¤Ÿè‡ªå®šä¹‰å’Œæ‰©å±•æ’­æ”¾å™¨ï¼Œå¤§éƒ¨åˆ†ç»„ä»¶éƒ½å¯ä»¥è‡ªå·±æ›¿æ¢ä»¥é€‚åº”å„ç§ä¸åŒéœ€æ±‚ï¼Œè¿˜å¯ä»¥æ¥å…¥ffmpegç»„ä»¶</p></li><li><p>ä¸IJKPlayerå’ŒVitamioç›¸æ¯”ï¼ŒExoPlayerå¯¼å…¥é¡¹ç›®ä¹‹åAPKä½“ç§¯å¢åŠ å°</p></li></ol><p>ç¼ºç‚¹ï¼š</p><ol><li><p>æœ€ä½æ”¯æŒç‰ˆæœ¬4.4ä¸”å®ç°æ¯”è¾ƒå¤æ‚</p></li><li><p>çº¦å¢åŠ APPåŒ…ä½“å‡ ç™¾KBçš„å¤§å°</p></li><li><p>ç›¸æ¯”äºAndroidåŸç”Ÿçš„MediaPlayerï¼ŒExoPlayerå°†æ˜¾è‘—çš„æ¶ˆè€—æ›´å¤šçš„ç”µé‡</p></li></ol><h4 id="æ”¯æŒçš„æ ¼å¼"><a href="#æ”¯æŒçš„æ ¼å¼" class="headerlink" title="æ”¯æŒçš„æ ¼å¼"></a>æ”¯æŒçš„æ ¼å¼</h4><img src="/47f70dd6/4.webp"><h4 id="æ”¯æŒè®¾å¤‡æƒ…å†µ"><a href="#æ”¯æŒè®¾å¤‡æƒ…å†µ" class="headerlink" title="æ”¯æŒè®¾å¤‡æƒ…å†µ"></a>æ”¯æŒè®¾å¤‡æƒ…å†µ</h4><p>ExoPlayeræ”¯æŒå¤§éƒ¨åˆ†æµåª’ä½“æ ¼å¼ï¼Œå¹¶ä¸”å¯¹DRMçš„æ”¯æŒä¹Ÿæ¯”è¾ƒå‹å¥½ï¼Œæ¯”å¦‚ä¸‹æ–¹å°±æ˜¯å®˜æ–¹æä¾›çš„æ”¯æŒçš„è®¾å¤‡æƒ…å†µï¼š</p><img src="/47f70dd6/5.webp"><h4 id="æ¶æ„å›¾"><a href="#æ¶æ„å›¾" class="headerlink" title="æ¶æ„å›¾"></a>æ¶æ„å›¾</h4><p>é€šè¿‡ExoPlayerçš„æ¶æ„å›¾ï¼Œå¯ä»¥çœ‹åˆ°å…¶ç»„ä»¶æ¨¡å—åŒ–çš„è®¾è®¡ï¼Œè¿™ä¸ªæ¶æ„è®¾è®¡å€¼å¾—å­¦ä¹ ï¼Œä¹Ÿæ˜¯å¥½çš„ç»„ä»¶&#x2F;SDKçš„ä¸€ä¸ªé‡è¦è¦æ±‚ã€‚åœ¨æ—¥å¸¸é¡¹ç›®å¼€å‘ä¸­ï¼Œå¼€å‘ä¸€ä¸ªç»„ä»¶ä»æ˜“ç”¨æ€§å’Œä»¥æ‰©å±•æ€§æ–¹é¢è€ƒè™‘ï¼Œæ—¢è¦ä¿è¯ä½¿ç”¨è€…å¾ˆå®¹æ˜“ä¸Šæ‰‹ä½¿ç”¨ï¼ˆæä¾›ä¸€å¥—é»˜è®¤å®ç°ï¼‰ï¼Œåˆè¦æœ‰æ–¹ä¾¿ä½¿ç”¨è€…æ ¹æ®è‡ªå·±çš„åœºæ™¯è¿›è¡Œæ–¹ä¾¿çš„æ‰©å±•çš„èƒ½åŠ›ã€‚</p><img src="/47f70dd6/6.webp"><h4 id="çº¿ç¨‹æ¨¡å‹"><a href="#çº¿ç¨‹æ¨¡å‹" class="headerlink" title="çº¿ç¨‹æ¨¡å‹"></a>çº¿ç¨‹æ¨¡å‹</h4><img src="/47f70dd6/7.webp"><h4 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h4><p>æˆ‘ä»¬åªè¦æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤å°±èƒ½ç®€å•çš„å°†ExoPlayerä½¿ç”¨èµ·æ¥äº†ï¼š</p><p>1ã€æ·»åŠ å¯¹ExoPlayeråº“çš„ä¾èµ–<br>2ã€åˆ›å»ºä¸€ä¸ªSimpleExoPlayerå®ä¾‹<br>3ã€å°†æ’­æ”¾å™¨å…³è”åˆ°æ’­æ”¾æ¸²æŸ“çš„Viewä¸Š<br>4ã€å°†æ’­æ”¾èµ„æºåŒ…è£…ç±»MediaSourceçš„å¯¹è±¡å‡†å¤‡å¥½ï¼Œé€šè¿‡ExoPlayerçš„prepare()æ–¹æ³•è®¾ç½®è¿›å»<br>5ã€å½“æˆ‘ä»¬ä¸éœ€è¦æ’­æ”¾çš„æ—¶å€™è®°å¾—é€šè¿‡releaseæ–¹æ³•è¿›è¡Œé‡Šæ”¾</p><ol><li><p><strong>æ·»åŠ ExoPlayeræ¨¡å—</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// implementation &#x27;com.google.android.exoplayer:exoplayer:2.x.x&#x27;</span></span><br><span class="line">implementation <span class="string">&#x27;com.google.android.exoplayer:exoplayer:2.15.0&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>æ·»åŠ Java 8æ”¯æŒ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">compileOptions &#123;</span><br><span class="line">        targetCompatibility JavaVersion.VERSION_1_8</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>åˆ›å»ºæ’­æ”¾å™¨</strong></p><p>ExoPlayerå¯ä»¥ä½¿ç”¨SimpleExoPlayer.Builderæˆ–åˆ›å»ºå®ä¾‹ExoPlayer.Builderï¼Œè¿™äº›æ„å»ºå™¨æä¾›äº†ä¸€ç³»åˆ—ç”¨äºåˆ›å»ºExoPlayerå®ä¾‹çš„å®šåˆ¶é€‰é¡¹ã€‚</p><p>å¯¹äºç»å¤§å¤šæ•°ç”¨ä¾‹ï¼Œ SimpleExoPlayer.Builderéƒ½å¯ä»¥ä½¿ç”¨ã€‚</p><p>æ­¤æ„å»ºå™¨è¿”å› SimpleExoPlayerï¼Œå®ƒæ‰©å±•ExoPlayerä¸ºæ·»åŠ å…¶ä»–é«˜çº§æ’­æ”¾å™¨åŠŸèƒ½ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 2.12ç‰ˆæœ¬ä»¥åæ¨è</span></span><br><span class="line"><span class="type">SimpleExoPlayer</span> <span class="variable">player</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleExoPlayer</span>.Builder(context).build();</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥è¿™ä¹ˆåˆ›å»ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºå¸¦å®½</span></span><br><span class="line"><span class="type">BandwidthMeter</span> <span class="variable">bandwidthMeter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultBandwidthMeter</span>();</span><br><span class="line"><span class="comment">// åˆ›å»ºè½¨é“é€‰æ‹©å·¥å‚ è§†é¢‘æ¯ä¸€è¿™çš„ç”»é¢å¦‚ä½•æ¸²æŸ“,å®ç°é»˜è®¤çš„å®ç°ç±»</span></span><br><span class="line">TrackSelection.<span class="type">Factory</span> <span class="variable">videoTrackSelectionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultRenderersFactory</span>(application)</span><br><span class="line"><span class="comment">// åˆ›å»ºè½¨é“é€‰æ‹©å®ä¾‹ è§†é¢‘çš„éŸ³è§†é¢‘è½¨é“å¦‚ä½•åŠ è½½ ä½¿ç”¨é»˜è®¤çš„è½¨é“é€‰æ‹©å™¨</span></span><br><span class="line"><span class="type">TrackSelector</span> <span class="variable">trackSelector</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultTrackSelector</span>(videoTrackSelectionFactory);</span><br><span class="line"><span class="comment">// åˆ›å»ºæ’­æ”¾å™¨å®ä¾‹</span></span><br><span class="line"><span class="type">SimpleExoPlayer</span> <span class="variable">player</span> <span class="operator">=</span> ExoPlayerFactory.newSimpleInstance(<span class="built_in">this</span>, trackSelector);</span><br></pre></td></tr></table></figure></li><li><p><strong>å°†æ’­æ”¾å™¨é™„åŠ åˆ°è§†å›¾</strong></p><p>ExoPlayeråº“ä¸ºåª’ä½“æ’­æ”¾æä¾›äº†ä¸€ç³»åˆ—é¢„æ„å»ºçš„UIç»„ä»¶ã€‚å…¶ä¸­åŒ…æ‹¬StyledPlayerViewï¼Œå®ƒå°è£…äº† StyledPlayerControlViewã€SubtitleViewå’Œæ¸²æŸ“è§†é¢‘çš„Surfaceã€‚</p><p>å°†æ’­æ”¾å™¨ç»‘å®šåˆ°è§†å›¾</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Bind the player to the view.</span></span><br><span class="line">playerView.setPlayer(player);</span><br></pre></td></tr></table></figure><p>å¯¹äºå®ç°è‡ªå·±çš„UIè§†é¢‘çš„åº”ç”¨ï¼Œå¯ä»¥åˆ†åˆ«ä½¿ç”¨SimpleExoPlayerçš„setVideoSurfaceView()ï¼ŒsetVideoTextureView()ï¼ŒsetVideoSurfaceHolder()å’ŒsetVideoSurface()çš„æ–¹æ³•è®¾ç½®è‡ªå·±çš„SurfaceViewï¼ŒTextureViewï¼Œ SurfaceHolderæˆ–è€…Surfaceã€‚</p><p>SimpleExoPlayerçš„addTextOutput()å¯ç”¨äºæ¥æ”¶åœ¨æ’­æ”¾è¿‡ç¨‹ä¸­åº”å‘ˆç°çš„å­—å¹•ã€‚</p></li><li><p><strong>å¡«å……æ’­æ”¾åˆ—è¡¨å¹¶å‡†å¤‡æ’­æ”¾å™¨</strong></p><p>åœ¨ExoPlayerä¸­ï¼Œæ¯ç§åª’ä½“éƒ½ç”±è¡¨ç¤ºMediaItemã€‚æ’­æ”¾åˆ—è¡¨å¯ä»¥åœ¨æ’­æ”¾æœŸé—´è¿›è¡Œæ›´æ–°ï¼Œè€Œæ— éœ€å†æ¬¡å‡†å¤‡æ’­æ”¾å™¨ã€‚</p><p>è¦æ’­æ”¾åª’ä½“ï¼Œéœ€è¦æ„å»ºç›¸åº”çš„åª’ä½“MediaItemï¼Œå°†å…¶æ·»åŠ åˆ°æ’­æ”¾å™¨ä¸­ï¼Œå‡†å¤‡æ’­æ”¾å™¨ï¼Œç„¶åè°ƒç”¨playä»¥å¼€å§‹æ’­æ”¾ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºmediaItem</span></span><br><span class="line"><span class="type">MediaItem</span> <span class="variable">mediaItem</span> <span class="operator">=</span> MediaItem.fromUri(videoUri);</span><br><span class="line"><span class="comment">// è®¾ç½®mediaItem</span></span><br><span class="line">player.setMediaItem(mediaItem);</span><br><span class="line"><span class="comment">// å‡†å¤‡æ’­æ”¾</span></span><br><span class="line">player.prepare();</span><br><span class="line"><span class="comment">// å¼€å§‹æ’­æ”¾</span></span><br><span class="line">player.play();</span><br></pre></td></tr></table></figure><p>ExoPlayerç›´æ¥æ”¯æŒæ’­æ”¾åˆ—è¡¨ï¼Œå› æ­¤å¯ä»¥ä¸ºæ’­æ”¾å™¨å‡†å¤‡å¤šä¸ªè¦ä¾æ¬¡æ’­æ”¾çš„åª’ä½“é¡¹ç›®ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºmediaItem</span></span><br><span class="line"><span class="type">MediaItem</span> <span class="variable">firstItem</span> <span class="operator">=</span> MediaItem.fromUri(firstVideoUri);</span><br><span class="line"><span class="type">MediaItem</span> <span class="variable">secondItem</span> <span class="operator">=</span> MediaItem.fromUri(secondVideoUri);</span><br><span class="line"><span class="comment">// æ·»åŠ è¦æ’­æ”¾çš„åª’ä½“é¡¹ç›®ã€‚</span></span><br><span class="line">player.addMediaItem(firstItem);</span><br><span class="line">player.addMediaItem(secondItem);</span><br><span class="line"><span class="comment">// å‡†å¤‡æ’­æ”¾</span></span><br><span class="line">player.prepare();</span><br><span class="line"><span class="comment">// å¼€å§‹æ’­æ”¾</span></span><br><span class="line">player.play();</span><br></pre></td></tr></table></figure><p>åœ¨ExoPlayer 2.12ä¹‹å‰ï¼Œplayeréœ€è¦çš„æ˜¯ä¸€ä¸ªMediaSourceè€Œä¸æ˜¯MediaItemã€‚ä»2.12å¼€å§‹ï¼Œplayerå†…éƒ¨ä¼šå°†MediaItemè½¬æ¢ä¸ºéœ€è¦çš„ MediaSourceå®ä¾‹ï¼Œä½†ä»å¯ä»¥ä½¿ç”¨ExoPlayer.setMediaSource()å’ŒExoPlayer.addMediaSource()å°†MediaSourceå®ä¾‹ç›´æ¥æä¾›ç»™æ’­æ”¾å™¨ã€‚</p><p>2.12ä¹‹å‰æ˜¯è¿™æ ·åˆ›å»ºçš„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºåŠ è½½æ•°æ®çš„å·¥å‚ (ç”ŸæˆåŠ è½½åª’ä½“æ•°æ®çš„æ•°æ®æºå®ä¾‹)</span></span><br><span class="line">DataSource.<span class="type">Factory</span> <span class="variable">dataSourceFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultDataSourceFactory</span>(context, Util.getUserAgent(context, <span class="string">&quot;yourApplicationName&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="type">Uri</span> <span class="variable">uri</span> <span class="operator">=</span> Uri.parse(url);</span><br><span class="line"><span class="comment">// åˆ›å»ºèµ„æº</span></span><br><span class="line"><span class="type">ExtractorMediaSource</span> <span class="variable">mediaSource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ExtractorMediaSource</span>.Factory(dataSourceFactory).createMediaSource(uri);</span><br><span class="line"><span class="comment">// æˆ–è€…MediaSource mediaSource= new ProgressiveMediaSource.Factory(dataSourceFactory).createMediaSource(uri);</span></span><br><span class="line"><span class="comment">// å‡†å¤‡æ’­æ”¾</span></span><br><span class="line">player.prepare(mediaSource);</span><br><span class="line"><span class="comment">// å¼€å§‹æ’­æ”¾</span></span><br><span class="line">player.setPlayWhenReady(<span class="literal">true</span>);</span><br></pre></td></tr></table></figure></li><li><p><strong>æ§åˆ¶æ’­æ”¾å™¨</strong></p><p>å‡†å¤‡å¥½æ’­æ”¾å™¨åï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨æ’­æ”¾å™¨ä¸Šçš„æ–¹æ³•æ¥æ§åˆ¶æ’­æ”¾ã€‚ä¸‹é¢åˆ—å‡ºäº†ä¸€äº›æœ€å¸¸ç”¨çš„æ–¹æ³•ï¼š<br>play()ã€pause()ï¼Œå¼€å§‹å’Œæš‚åœæ’­æ”¾<br>seekTo()ï¼Œå…è®¸åœ¨mediaå†…æœå¯»ã€‚<br>hasPrevious()ã€hasNext()ã€previous()ã€next()ï¼Œå…è®¸é€šè¿‡æ’­æ”¾åˆ—è¡¨è¿›è¡Œæµè§ˆã€‚<br>setRepeatMode()ï¼Œæ§åˆ¶mediaæ˜¯å¦å¾ªç¯ä»¥åŠå¦‚ä½•å¾ªç¯ã€‚<br>setShuffleModeEnabled()ï¼Œæ§åˆ¶æ’­æ”¾åˆ—è¡¨ç§»åŠ¨ã€‚<br>setPlaybackParameters()ï¼Œè°ƒæ•´æ’­æ”¾é€Ÿåº¦å’ŒéŸ³é¢‘éŸ³é«˜ã€‚</p><p>å¦‚æœplayerç»‘å®šåˆ°PlayerViewæˆ–PlayerControlViewï¼Œåˆ™ç”¨æˆ·ä¸è¿™äº›ç»„ä»¶çš„äº¤äº’å°†å¯¼è‡´è°ƒç”¨playerä¸Šçš„ç›¸åº”æ–¹æ³•ã€‚</p></li><li><p><strong>é‡Šæ”¾æ’­æ”¾å™¨</strong></p><p>åœ¨ä¸å†éœ€è¦æ’­æ”¾å™¨æ—¶å°†å…¶é‡Šæ”¾ï¼Œä»¥é‡Šæ”¾æœ‰é™çš„èµ„æºï¼ˆä¾‹å¦‚è§†é¢‘è§£ç å™¨ï¼‰ä¾›å…¶ä»–åº”ç”¨ç¨‹åºä½¿ç”¨ã€‚</p><p>å¯ä»¥é€šè¿‡è°ƒç”¨æ¥å®ŒæˆExoPlayer.release</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onDestroy</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>.onDestroy();</span><br><span class="line">    <span class="keyword">if</span> (player != <span class="literal">null</span>) &#123;</span><br><span class="line">        player.release();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id="æ‹“å±•ä½¿ç”¨"><a href="#æ‹“å±•ä½¿ç”¨" class="headerlink" title="æ‹“å±•ä½¿ç”¨"></a>æ‹“å±•ä½¿ç”¨</h4><ol><li><p>æ·»åŠ å›è°ƒå‡½æ•°ä¸å…¶å®ƒç›‘å¬å™¨</p><p>Events å¦‚çŠ¶æ€æ›´æ”¹å’Œæ’­æ”¾é”™è¯¯ç­‰äº‹ä»¶å°†æŠ¥å‘Šç»™å·²æ³¨å†ŒPlayer.EventListenerå®ä¾‹ã€‚</p><p>æ³¨å†Œä¸€ä¸ªç›‘å¬å™¨æ¥æ¥æ”¶è¿™æ ·çš„äº‹ä»¶ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ·»åŠ ä¸€ä¸ªç›‘å¬å™¨æ¥æ¥æ”¶æ¥è‡ªæ’­æ”¾å™¨çš„äº‹ä»¶.</span></span><br><span class="line">player.addListener(eventListener);</span><br></pre></td></tr></table></figure><p>é€šç”¨å›è°ƒï¼š</p><table><thead><tr><th>æ–¹æ³•</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>onEvents(Player player, Events events)</td><td>å›è°ƒ</td></tr></tbody></table><p>ä¸ªåˆ«å›è°ƒï¼š</p><table><thead><tr><th>æ–¹æ³•</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>onPlaybackStateChanged(@State int state)</td><td>æ’­æ”¾çŠ¶æ€å˜æ›´</td></tr><tr><td>onIsPlayingChanged(boolean isPlaying)</td><td>å•ç‹¬æ£€æŸ¥æ˜¯å¦æ’­æ”¾ï¼Œä¸ç”¨æ¯æ¬¡éƒ½isPlaying()</td></tr><tr><td>onPlayerError(ExoPlaybackException error)</td><td>æ¥æ”¶åˆ°å¯¼è‡´æ’­æ”¾å¤±è´¥çš„é”™è¯¯ä¿¡æ¯ï¼Œå‘ç”Ÿé”™è¯¯æ—¶å°†åœ¨æ’­æ”¾çŠ¶æ€è½¬æ¢ä¸ºPlayer.STATE_IDLEä¹‹å‰ç«‹å³è°ƒç”¨æ­¤æ–¹æ³•ã€‚å¯ä»¥é€šè¿‡è°ƒç”¨ExoPlayer.retryé‡è¯•æˆ–åœæ­¢çš„æ’­æ”¾</td></tr><tr><td>onMediaItemTransition(MediaItem mediaItem, @MediaItemTransitionReason int reason)</td><td>æ’­æ”¾å™¨æ›´æ”¹æ’­æ”¾åˆ—è¡¨ä¸­çš„æ–°åª’ä½“é¡¹ç›®æ—¶ï¼Œå°±ä¼šåœ¨æ³¨å†ŒPlayer.EventListenersä¸Šè°ƒç”¨åˆ° ã€‚è¡¨æ˜åŸå› æ˜¯è‡ªåŠ¨è¿‡æ¸¡ã€seekï¼ˆä¾‹å¦‚åœ¨è°ƒç”¨ä¹‹åplayer.next()ï¼‰ã€é‡å¤ç›¸åŒé¡¹ç›®è¿˜æ˜¯ç”±äºæ’­æ”¾åˆ—è¡¨æ›´æ”¹ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœå½“å‰æ­£åœ¨æ’­æ”¾çš„é¡¹ç›®è¢«åˆ é™¤ï¼‰å¼•èµ·çš„</td></tr><tr><td>onPositionDiscontinuity()ä¸reason&#x3D;DISCONTINUITY_REASON_SEEK</td><td>æ˜¯è°ƒç”¨Player.seekToçš„ç›´æ¥ç»“æœ</td></tr></tbody></table><p>ä¸¤è€…çš„åŒºåˆ«ï¼š</p><table><thead><tr><th>é€šç”¨å›è°ƒ</th><th>ä¸ªåˆ«å›è°ƒ</th></tr></thead><tbody><tr><td>å¸Œæœ›é’ˆå¯¹å¤šä¸ªäº‹ä»¶è§¦å‘ç›¸åŒçš„é€»è¾‘ï¼ˆä¾‹å¦‚æ›´æ–°ç”¨äºä¸¤è€…çš„UIonPlaybackStateChangedå’Œ onPlayWhenReadyChangedï¼‰</td><td>å¯¹æ›´æ”¹çš„åŸå› æ„Ÿå…´è¶£ã€‚ä¾‹å¦‚ï¼Œä¸ºonPlayWhenReadyChangedæˆ–æä¾›çš„åŸå› onMediaItemTransition</td></tr><tr><td>éœ€è¦è®¿é—®è¯¥Playerå¯¹è±¡ä»¥è§¦å‘å…¶ä»–äº‹ä»¶ï¼Œä¾‹å¦‚åœ¨åª’ä½“é¡¹è½¬æ¢åè¿›è¡Œæœç´¢</td><td>ä»…å¯¹é€šè¿‡å›è°ƒå‚æ•°æä¾›çš„æ–°å€¼èµ·ä½œç”¨ï¼Œæˆ–è§¦å‘ä¸ä¾èµ–äºå›è°ƒå‚æ•°çš„å…¶ä»–äº‹ä»¶</td></tr><tr><td>å¯¹äº‹ä»¶æ˜¯å¦åœ¨é€»è¾‘ä¸Šä¸€èµ·å‘ç”Ÿæ„Ÿå…´è¶£ã€‚ä¾‹å¦‚onPlaybackStateChangedï¼Œä»¥STATE_BUFFERINGå› åª’ä½“é¡¹ç›®è¿‡æ¸¡ã€‚</td><td>æ›´å–œæ¬¢åœ¨æ–¹æ³•åç§°ä¸­ä»¥æ¸…æ™°å¯è¯»çš„æ–¹å¼æŒ‡ç¤ºè§¦å‘äº‹ä»¶çš„åŸå› </td></tr></tbody></table><p>æ·»åŠ å…¶å®ƒSimpleExoPlayerç›‘å¬å™¨ï¼š<br>addAnalyticsListenerï¼šæ”¶å¬è¯¦ç»†çš„äº‹ä»¶ï¼Œè¿™äº›äº‹ä»¶å¯èƒ½å¯¹åˆ†æå’Œæ—¥å¿—è®°å½•æœ‰ç”¨ã€‚è¯·å‚é˜…åˆ†æé¡µé¢ä»¥è·å–æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚<br>addTextOutputï¼šæ”¶å¬å­—å¹•æˆ–å­—å¹•æç¤ºä¸­çš„æ›´æ”¹ã€‚<br>addMetadataOutputï¼šæ”¶å¬å®šæ—¶çš„å…ƒæ•°æ®äº‹ä»¶ï¼Œä¾‹å¦‚å®šæ—¶çš„ID3å’ŒEMSGæ•°æ®ã€‚<br>addVideoListenerï¼šæ”¶å¬ä¸è§†é¢‘æ¸²æŸ“æœ‰å…³çš„äº‹ä»¶ï¼Œè¿™äº›äº‹ä»¶å¯èƒ½å¯¹è°ƒæ•´UIæœ‰ç”¨ï¼ˆä¾‹å¦‚ï¼ŒSurfaceæ­£åœ¨æ¸²æŸ“è§†é¢‘çš„é•¿å®½æ¯”ï¼‰ã€‚<br>addAudioListenerï¼šæ”¶å¬ä¸éŸ³é¢‘æœ‰å…³çš„äº‹ä»¶ï¼Œä¾‹å¦‚éŸ³é¢‘ä¼šè¯IDæ›´æ”¹ä»¥åŠæ’­æ”¾å™¨éŸ³é‡æ›´æ”¹æ—¶ã€‚<br>addDeviceListenerï¼šæ”¶å¬ä¸è®¾å¤‡çŠ¶æ€æœ‰å…³çš„äº‹ä»¶ã€‚</p><p>ExoPlayerçš„UIç»„ä»¶ï¼ˆä¾‹å¦‚StyledPlayerViewï¼‰å°†è‡ªå·±æ³¨å†Œä¸ºç›¸åº”çš„äº‹ä»¶çš„ç›‘å¬å™¨ã€‚å› æ­¤ï¼Œä½¿ç”¨ä¸Šè¿°æ–¹æ³•è¿›è¡Œæ‰‹åŠ¨æ³¨å†Œä»…å¯¹å®ç°è‡ªå·±çš„æ’­æ”¾å™¨UIæˆ–éœ€è¦å‡ºäºå…¶ä»–ç›®çš„ç›‘å¬äº‹ä»¶çš„åº”ç”¨ç¨‹åºæœ‰ç”¨ã€‚</p></li><li><p>åœ¨æŒ‡å®šçš„æ’­æ”¾ä½ç½®è§¦å‘äº‹ä»¶</p><p>å¦‚æœéœ€è¦åœ¨æŒ‡å®šçš„æ’­æ”¾ä½ç½®è§¦å‘äº‹ä»¶ï¼Œæ”¯æŒä½¿ç”¨ExoPlayer.createMessage()æ¥åˆ›å»ºPlayerMessageã€‚å®ƒå¯ä»¥ä½¿ç”¨æ¥è®¾ç½®åº”æ‰§è¡Œæ’­æ”¾çš„ä½ç½®PlayerMessage.setPosition()ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¶ˆæ¯æ˜¯åœ¨æ’­æ”¾çº¿ç¨‹ä¸Šæ‰§è¡Œçš„ï¼Œä½†è¿™å¯ä»¥ä½¿ç”¨è¿›è¡Œè‡ªå®šä¹‰ PlayerMessage.setLooper()ã€‚PlayerMessage.setDeleteAfterDelivery()å¯ç”¨äºæ§åˆ¶æ˜¯åœ¨æ¯æ¬¡é‡åˆ°æŒ‡å®šçš„æ’­æ”¾ä½ç½®æ—¶ï¼ˆæ˜¯ç”±äºæœå¯»å’Œé‡å¤æ¨¡å¼è€Œå‘ç”Ÿå¤šæ¬¡ï¼‰è¿˜æ˜¯ä»…åœ¨ç¬¬ä¸€æ¬¡æ—¶æ‰§è¡Œæ¶ˆæ¯ã€‚ä¸€æ—¦PlayerMessageé…ç½®äº†ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿›è¡Œå®‰æ’PlayerMessage.send()ã€‚</p><p>åœ¨æŒ‡å®šçš„æ’­æ”¾ä½ç½®è§¦å‘äº‹ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">player.createMessage((messageType, payload) -&gt; &#123;</span><br><span class="line">    <span class="comment">// Do something at the specified playback position.</span></span><br><span class="line">&#125;)</span><br><span class="line">.setLooper(Looper.getMainLooper())</span><br><span class="line">.setPosition(<span class="comment">/* windowIndex= */</span> <span class="number">0</span>, <span class="comment">/* positionMs= */</span> <span class="number">120000</span>)</span><br><span class="line">.setPayload(customPayloadData)</span><br><span class="line">.setDeleteAfterDelivery(<span class="literal">false</span>)</span><br><span class="line">.send();</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥è¯¢&#x2F;ä¿®æ”¹æ’­æ”¾åˆ—è¡¨</p><p>å¯ä»¥ä½¿ç”¨Player.getMediaItemCountå’ŒPlayer.getMediaItemAt()æ¥æŸ¥è¯¢æ’­æ”¾åˆ—è¡¨ã€‚</p><p>å¯ä»¥é€šè¿‡Player.getCurrentMediaItem()æŸ¥è¯¢å½“å‰æ’­æ”¾çš„åª’ä½“é¡¹ç›®ã€‚</p><p>å¯ä»¥é€šè¿‡æ·»åŠ ã€ç§»åŠ¨å’Œåˆ é™¤åª’ä½“é¡¹æ¥åŠ¨æ€ä¿®æ”¹æ’­æ”¾åˆ—è¡¨ã€‚</p><p>å¯ä»¥åœ¨æ’­æ”¾ä¹‹å‰å’Œæ’­æ”¾è¿‡ç¨‹ä¸­é€šè¿‡è°ƒç”¨ç›¸åº”çš„æ’­æ”¾åˆ—è¡¨APIæ–¹æ³•æ¥å®Œæˆæ­¤æ“ä½œï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨playlistçš„positionæ·»åŠ ä¸€ä¸ªMediaItem</span></span><br><span class="line">player.addMediaItem(<span class="comment">/* index= */</span> <span class="number">1</span>, MediaItem.fromUri(thirdUri));</span><br><span class="line"><span class="comment">//å°†ç¬¬ä¸‰ä¸ªMediaItemä»ä½ç½®2ç§»åŠ¨åˆ°playlistçš„å¼€å§‹</span></span><br><span class="line">player.moveMediaItem(<span class="comment">/* currentIndex= */</span> <span class="number">2</span>, <span class="comment">/* newIndex= */</span> <span class="number">0</span>);</span><br><span class="line"><span class="comment">// ä»playlistä¸­ç§»é™¤ç¬¬ä¸€é¡¹</span></span><br><span class="line">player.removeMediaItem(<span class="comment">/* index= */</span> <span class="number">0</span>);</span><br></pre></td></tr></table></figure><p>è¿˜æ”¯æŒæ›¿æ¢å’Œæ¸…é™¤æ•´ä¸ªæ’­æ”¾åˆ—è¡¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Replaces the playlist with a new one.</span></span><br><span class="line">List&lt;MediaItem&gt; newItems = ImmutableList.of(</span><br><span class="line">    MediaItem.fromUri(fourthUri),</span><br><span class="line">    MediaItem.fromUri(fifthUri)</span><br><span class="line">);</span><br><span class="line">player.setMediaItems(newItems, <span class="comment">/* resetPosition= */</span> <span class="literal">true</span>);</span><br><span class="line"><span class="comment">// Clears the playlist. If prepared, the player transitions to the ended state.</span></span><br><span class="line">player.clearMediaItems();</span><br></pre></td></tr></table></figure><p>æ’­æ”¾å™¨ä¼šåœ¨æ’­æ”¾è¿‡ç¨‹ä¸­ä»¥æ­£ç¡®çš„æ–¹å¼è‡ªåŠ¨å¤„ç†ä¿®æ”¹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå½“å‰æ’­æ”¾çš„åª’ä½“é¡¹ç›®å·²ç§»åŠ¨ï¼Œåˆ™æ’­æ”¾ä¸ä¼šä¸­æ–­ï¼Œå¹¶ä¸”æ–°çš„åç»§å¯¹è±¡å°†åœ¨å®Œæˆåæ’­æ”¾ã€‚å¦‚æœMediaItemåˆ é™¤äº†å½“å‰æ­£åœ¨æ’­æ”¾çš„åˆ—è¡¨é¡¹ï¼Œåˆ™æ’­æ”¾å™¨å°†è‡ªåŠ¨ç§»åŠ¨åˆ°æ’­æ”¾å‰©ä½™çš„ç¬¬ä¸€ä¸ªåç»§åˆ—è¡¨é¡¹ï¼Œå¦‚æœä¸å­˜åœ¨è¯¥åç»§æ’­æ”¾å™¨ï¼Œåˆ™æ’­æ”¾å™¨å°†è¿‡æ¸¡åˆ°ç»“æŸçŠ¶æ€ã€‚</p></li></ol><hr><h3 id="ijkPlayerï¼ˆä¸“æ³¨äºè·¨å¹³å°ï¼‰"><a href="#ijkPlayerï¼ˆä¸“æ³¨äºè·¨å¹³å°ï¼‰" class="headerlink" title="ijkPlayerï¼ˆä¸“æ³¨äºè·¨å¹³å°ï¼‰"></a>ijkPlayerï¼ˆä¸“æ³¨äºè·¨å¹³å°ï¼‰</h3><h4 id="ç®€ä»‹-1"><a href="#ç®€ä»‹-1" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h4><p>ijkplayeræ˜¯ç”±bç«™å¼€æºçš„æ’­æ”¾å™¨é¡¹ç›®ï¼Œæœ€åº•å±‚çš„æ˜¯<strong>ijkffmpeg</strong>æ¨¡å—æ˜¯ç”±è‘—åçš„å¼€æºæµåª’ä½“å¼€æºé¡¹ç›®ffmpegæ”¹å†™è€Œæ¥ï¼Œè´Ÿè´£è§†é¢‘çš„è§£åè®®ã€è§£å°è£…çš„ä¸€äº›ä¸šåŠ¡ã€‚</p><p>yuvæ ¼å¼ä¸€å¼€å§‹æ˜¯ä¸ºäº†å¹¿æ’­ç”µè§†ä¿¡å·å…¼å®¹é»‘ç™½ç”µè§†è€Œç”Ÿï¼Œè€Œåœ¨ç½‘ç»œæ—¶ä»£ç”±äºyuv420ã€yuv420spéœ€è¦çš„å¸¦å®½ç›¸å¯¹è¾ƒå°æ‰€ä»¥ä¾ç„¶å¾—åˆ°äº†æ²¿ç”¨ã€‚ä½†æ˜¯ç”±äºç¡¬ä»¶è®¾å¤‡æ”¯æŒçš„éƒ½æ˜¯rgbaæ ¼å¼çš„åƒç´ ä¿¡æ¯ï¼Œæ‰€ä»¥è§£å°è£…ä¹‹åæ‹¿åˆ°çš„åƒç´ ä¿¡æ¯éœ€è¦è¿›è¡Œè½¬åŒ–ä¹‹åæ‰å¯ä»¥æ˜¾ç¤ºå‡ºæ¥ï¼Œijkplayerä¸­è´Ÿè´£è¿™æ–¹é¢åŠŸèƒ½çš„æ¨¡å—æ˜¯<strong>ijkyuv</strong>ã€‚</p><p>åƒç´ ä¿¡æ¯è§£æä¹‹åéœ€è¦å±•ç¤ºåˆ°ç”¨æˆ·çš„é¢å‰ï¼Œijkplayeré€‰æ‹©äº†ä½¿ç”¨è‘—åçš„å¯ç§»æ¤æ¡†æ¶SDLï¼Œä½†æ˜¯ijkplayeré’ˆå¯¹ç§»åŠ¨å¹³å°çš„è¿›è¡Œäº†ä¼˜åŒ–å¹¶å°†åç§°æ”¹ä¸º<strong>ijkSDL</strong>ã€‚</p><p>æ—¢ç„¶æœ‰åƒç´ ä¿¡æ¯çš„å¤„ç†é‚£å°±å¿…ç„¶ä¹Ÿå­˜åœ¨å¯¹éŸ³é¢‘ä¿¡æ¯çš„å¤„ç†ï¼Œæ¯”è¾ƒå¸¸è§çš„ä¸€ä¸ªåœºæ™¯å°±æ˜¯å˜é€Ÿæ’­æ”¾ï¼Œä½†æ˜¯OpenSL ESåœ¨å€é€Ÿæ’­æ”¾éŸ³é¢‘çš„æ—¶å€™å­˜åœ¨å˜è°ƒçš„é—®é¢˜ï¼Œæ‰€ä»¥å¼•å…¥äº†<strong>ijksoundtouch</strong>æ¥è§£å†³å€é€Ÿå˜è°ƒçš„é—®é¢˜ã€‚</p><p>androidå¹³å°åŸç”Ÿå°±æ”¯æŒå¤šç§æ ¼å¼ï¼Œå¹¶ä¸”å¦‚æœä½¿ç”¨ç¡¬ä»¶è§£ç çš„è¯å¯ä»¥é™ä½cpuçš„è½½è·ï¼Œå°†è¿™äº›ä»»åŠ¡äº¤ç»™gpuè¿›è¡Œã€‚ä½†æ˜¯æ¯”è¾ƒå°´å°¬çš„æ˜¯ndkåœ¨android 21ä¹‹åæ‰æ·»åŠ ç›¸å…³çš„æ¥å£ã€‚æ‰€ä»¥ä¸ºäº†é€‚é…ä½é…ç½®ä½ç‰ˆæœ¬Androidæ‰‹æœº ijkplayer é‡‡ç”¨äº† ndk è°ƒç”¨ java æ–¹æ³•çš„æ–¹å¼æ¥è¿›è¡Œç¡¬ä»¶è§£ç ã€‚åŒæ—¶å¦‚æœé€‰æ‹©AudioTrackè¿›è¡Œæ’­æ”¾çš„è¯ä¹Ÿæ˜¯é€šè¿‡è¿™ç§æ–¹å¼è¿›è¡Œçš„ï¼Œè´Ÿè´£è¿™ä¸€æ–¹é¢å·¥ä½œçš„å°±æ˜¯<strong>ijkj4a</strong>ã€‚</p><h4 id="ç³»ç»Ÿæ¶æ„å›¾"><a href="#ç³»ç»Ÿæ¶æ„å›¾" class="headerlink" title="ç³»ç»Ÿæ¶æ„å›¾"></a>ç³»ç»Ÿæ¶æ„å›¾</h4><p>Androidä¸Šçš„ç³»ç»Ÿæ¶æ„å›¾å¦‚ä¸‹ï¼š</p><img src="/47f70dd6/8.png"><p><strong>ijkplayer-exampleï¼š</strong>æ˜¯uié€»è¾‘çš„å®ç°ï¼ŒåŒ…æ‹¬activityçš„å®ç°ã€uiæ§ä»¶çš„ç»„ç»‡ã€çª—å£çš„å®šåˆ¶ã€æ•°æ®çš„å­˜å‚¨ã€‚é€šè¿‡è°ƒç”¨ijkmediaplayerã€android mediaplayerã€ google exoplayerè¿™ä¸‰ç§mediaplayeræ¥å®ç°åª’ä½“æ’­æ”¾ã€‚</p><p><strong>ijkplayer-javaï¼š</strong>æ˜¯å¯¹åº•å±‚å®ç°çš„ijkmediaplayerå’Œandroid mediaplayerçš„javaå°è£…ï¼Œå¯¹ijkmediaplayerçš„å°è£…æ˜¯é€šè¿‡è°ƒç”¨åº•å±‚jniå¯¹åº”çš„javaæ¥å£ï¼Œå¯¹android mediaplayerçš„å°è£…æ˜¯è°ƒç”¨androidç³»ç»Ÿå®ç°çš„é»˜è®¤mediaplayeræ¥å£ã€‚</p><p><strong>ijkplayer-exoï¼š</strong>æ˜¯å¯¹google exoplayerçš„å°è£…ã€‚</p><p><strong>libijkplayerï¼š</strong>æä¾›äº†ijkmediaplayerçš„jniå®ç°ijkplayer_jni.cï¼Œç„¶åè°ƒç”¨å°è£…è¿‡çš„ffplayer.cï¼Œå†è°ƒç”¨åº•å±‚å®ç°çš„è§£ç åº“libijkffmpegå’Œæ˜¾ç¤ºåº“libijksdlï¼Œå®ç°äº†åª’ä½“æ–‡ä»¶çš„demuxã€decodeç­‰åŠŸèƒ½ã€‚</p><p><strong>libijksdlï¼š</strong>å®ç°å¯¹è§£ç åçš„æ•°æ®è¿›è¡Œæ˜¾ç¤ºã€‚</p><h4 id="Javaå±‚å…³é”®æ¨¡å—åˆ†æ"><a href="#Javaå±‚å…³é”®æ¨¡å—åˆ†æ" class="headerlink" title="Javaå±‚å…³é”®æ¨¡å—åˆ†æ"></a>Javaå±‚å…³é”®æ¨¡å—åˆ†æ</h4><ol><li><p>ä¸‰ç§ä¸åŒçš„mediaplayerå®ç°</p><img src="/47f70dd6/9.png"><p>AndroidMediaPlayeræ˜¯å¯¹Andoidé»˜è®¤æ’­æ”¾å™¨çš„å°è£…ã€‚<br>IjkMediaPlayeræ˜¯åŸºäºffmpegçš„æ’­æ”¾å™¨å®ç°ã€‚<br>IjkExoMediaPlayeræ˜¯åŸºäºGoodleå¼€æºçš„ExoPlayerçš„å°è£…ã€‚</p></li><li><p>è®¾ç½®ä¸åŒçš„Render</p><img src="/47f70dd6/10.png"><p>SurfaceRenderViewæ˜¯åŸºäºSurfaceViewçš„æ˜¾ç¤ºå®ç°ã€‚<br>TextureRenderViewæ˜¯åŸºäºTextureViewçš„æ˜¾ç¤ºå®ç°ã€‚<br>ä¸Šè¿°ä¸¤ç§æ˜¾ç¤ºå®ç°æ–¹å¼éƒ½å®ç°äº†æ¥å£IRenderViewã€‚</p></li></ol><h4 id="å…³é”®æµç¨‹"><a href="#å…³é”®æµç¨‹" class="headerlink" title="å…³é”®æµç¨‹"></a>å…³é”®æµç¨‹</h4><ol><li><p>è®¾ç½®surface</p><img src="/47f70dd6/11.png"><p>é€šè¿‡æ¥å£_setVideoSurface()ï¼ŒæŠŠUIå±‚çš„Surfaceå¯¹è±¡ï¼ˆå¯ä»¥ç†è§£ä¸ºæ˜¾ç¤ºçª—å£ï¼‰è®¾ç½®ç»™SDLæ˜¾ç¤ºå¯¹è±¡ï¼Œä½œä¸ºå…¶æ˜¾ç¤ºçª—å£ï¼ˆnative_windowï¼‰ï¼Œè¿™æ ·SDLæœ‰éœ€è¦æ˜¾ç¤ºçš„å†…å®¹å¯ä»¥ç›´æ¥åœ¨è¿™ä¸ªæ˜¾ç¤ºçª—å£ä¸Šæ˜¾ç¤ºè¾“å‡ºå³å¯ã€‚</p></li><li><p>æ˜¾ç¤ºæµç¨‹</p><p>è§£ç çº¿ç¨‹ffp_video_thread()è§£ç å®Œæˆä»¥åï¼Œè°ƒç”¨æ¥å£queue_picture()æŠŠéœ€è¦æ˜¾ç¤ºçš„bufferå¾€SDLæ¨¡å—å‘é€ã€‚<br>ç„¶åè°ƒç”¨func_fill_frame()å¡«å……æ˜¾ç¤ºbuffer, è¿™ä¸ªæ—¶å€™éœ€è¦åˆ¤æ–­æ˜¯é€šè¿‡ffmpegè¿˜æ˜¯mediacodecå®ç°çš„è§£ç ã€‚<br>å¦‚æœæ˜¯ffmpegå®ç°çš„è¯åˆ™è°ƒç”¨ijksdl_vout_overlay_ffmpeg.cä¸­çš„å‡½æ•°func_fill_frame()ã€‚<br>å¦åˆ™è°ƒç”¨ijksdl_vout_overlay_android_mediacodec.cä¸­çš„func_fill_frame()ã€‚<br>ç„¶åæ˜¾ç¤ºçº¿ç¨‹video_refresh_threadå°±å¯ä»¥å¼€å§‹æ˜¾ç¤ºäº†ã€‚å¦‚æœæ˜¯GPUæ”¯æŒçš„æ ¼å¼åˆ™è°ƒç”¨GPUè¿›è¡Œè¾“å‡ºï¼Œè¿™ä¸ªæ—¶å€™è°ƒç”¨çš„æ˜¯IJK_EGL_displayï¼Œå¦åˆ™è°ƒç”¨ANativeWindow_lockå’ŒANativeWindow_unlockAndPostè¿›è¡Œè¾“å‡ºã€‚</p></li></ol><h4 id="åŸºæœ¬ä½¿ç”¨-1"><a href="#åŸºæœ¬ä½¿ç”¨-1" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h4><p>ijkPlayerçš„ä½¿ç”¨ä¸mediaPlayerçš„è¿‡ç¨‹åŸºæœ¬ç›¸ä¼¼ï¼Œå³å°†MediaPlayerå¯¹è±¡æ¢ä¸ºIjkMediaPlayerå¯¹è±¡ã€‚ä¸åŒçš„æ˜¯IjkMediaPlayeråœ¨ä¸åŒå¹³å°ä¸‹é’ˆå¯¹æ€§çš„åº•å±‚è§£ç ã€‚</p><hr><h3 id="å…¶å®ƒ"><a href="#å…¶å®ƒ" class="headerlink" title="å…¶å®ƒ"></a>å…¶å®ƒ</h3><p>DKPlayerã€GSYVideoPlayer åŸºäºijkPlayerçš„æ’­æ”¾å™¨ï¼›<br>JiaoZiVideoPlayer ä¸“æ³¨äºå¤šæ’­æ”¾å†…æ ¸åˆ‡æ¢ï¼Œæ–¹ä¾¿æ¥å…¥è€…ä½¿ç”¨ä¸åŒçš„æ’­æ”¾å†…æ ¸ï¼›<br>PLDroidPlayer ä¸“æ³¨äºå®Œæ•´ SDK çš„å¼€å‘ï¼Œä½†å®ƒç›®å‰åº”è¯¥è¿˜æ˜¯é—­æºçš„ï¼Œç”¨æˆ·éš¾ä»¥å®šåˆ¶ã€‚</p><hr><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p><strong>MediaPlayerï¼š</strong>åœ¨Androidç³»ç»Ÿä¸­å¯¹äºè§†é¢‘æ’­æ”¾å™¨æœ‰åŸç”Ÿçš„å®ç°MediaPlayerï¼Œä»¥åŠå°†MediaPlayerã€SurfaceViewå°è£…åœ¨ä¸€èµ·çš„VideoViewï¼Œä¸¤è€…éƒ½åªæ˜¯ä½¿ç”¨ç¡¬è§£æ’­æ”¾ï¼ŒåŸºæœ¬ä¸Šåªæ”¯æŒæœ¬åœ°å’ŒHTTPåè®®çš„è§†é¢‘æ’­æ”¾ï¼Œæ‰©å±•æ€§éƒ½å¾ˆå·®ï¼Œåªé€‚åˆæœ€ç®€å•çš„è§†é¢‘æ’­æ”¾éœ€æ±‚ã€‚</p><p><strong>ExoPlayerï¼š</strong>æä¾›äº†æ›´å¥½çš„æ‰©å±•æ€§å’Œå®šåˆ¶èƒ½åŠ›ï¼Œå¹¶åŠ å…¥äº†å¯¹DASHå’ŒHLSç­‰ç›´æ’­åè®®çš„æ”¯æŒï¼Œä½†ä¹Ÿåªæ”¯æŒç¡¬ç ï¼Œå¦‚æœé¡¹ç›®ä¸­åªéœ€è¦æ”¯æŒå¯¹H264æ ¼å¼çš„è§†é¢‘æ’­æ”¾ï¼Œä»¥åŠæµåª’ä½“åè®®æ¯”è¾ƒå¸¸è§„ï¼ˆæ¯”å¦‚HTTPï¼ŒHLSï¼‰ï¼ŒåŸºäºExoPlayerå®šåˆ¶ä¹Ÿæ˜¯ä¸é”™çš„é€‰æ‹©ã€‚</p><p><strong>IjkPlayerï¼š</strong>æ•´åˆäº†FFMpegã€ExoPlayerã€MediaPlayerç­‰å¤šç§å®ç°ï¼Œæä¾›äº†ç±»ä¼¼äºMediaPlayerçš„APIï¼Œå¯ä»¥å®ç°è½¯ç¡¬è§£ç è‡ªç”±åˆ‡æ¢ï¼Œè‡ªå®šä¹‰TextureViewå®ç°ï¼ŒåŒæ—¶å¾—ç›ŠäºFFMpegçš„èƒ½åŠ›ï¼Œä¹Ÿèƒ½æ”¯æŒå¤šç§æµåª’ä½“åè®®ï¼ˆRTSPã€RTMPã€HLSç­‰ï¼‰ï¼Œå¤šç§è§†é¢‘ç¼–ç æ ¼å¼ï¼ˆh264ï¼Œmpeg4ï¼Œmjpeg)ï¼Œå…·æœ‰å¾ˆé«˜çš„çµæ´»æ€§ï¼Œå¯ä»¥å®šåˆ¶å®ç°è‡ªå·±ç‰¹è‰²çš„æ’­æ”¾å™¨ï¼ˆæ¯”å¦‚æ”¯æŒè§†é¢‘ç¼©æ”¾ã€è§†é¢‘ç¿»è½¬ç­‰ï¼‰ã€‚</p><hr><h3 id="å‚è€ƒä¸é¸£è°¢"><a href="#å‚è€ƒä¸é¸£è°¢" class="headerlink" title="å‚è€ƒä¸é¸£è°¢"></a>å‚è€ƒä¸é¸£è°¢</h3><blockquote><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43846184/article/details/96132895">https://blog.csdn.net/weixin_43846184/article/details/96132895</a><br><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/3f2f8bf1d581">https://www.jianshu.com/p/3f2f8bf1d581</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/u014606081/article/details/79927057">https://blog.csdn.net/u014606081/article/details/79927057</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_35864421/article/details/115345091">https://blog.csdn.net/qq_35864421/article/details/115345091</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/dengpeng_/article/details/54910840">https://blog.csdn.net/dengpeng_/article/details/54910840</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/codeyanbao/article/details/92842939">https://blog.csdn.net/codeyanbao/article/details/92842939</a><br><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1824644">https://cloud.tencent.com/developer/article/1824644</a><br><a target="_blank" rel="noopener" href="https://blog.51cto.com/u_15127656/2803056">https://blog.51cto.com/u_15127656/2803056</a><br><a target="_blank" rel="noopener" href="https://exoplayer.dev/doc/reference/com/google/android/exoplayer2/ExoPlayer.html">https://exoplayer.dev/doc/reference/com/google/android/exoplayer2/ExoPlayer.html</a><br><a target="_blank" rel="noopener" href="https://exoplayer.dev/doc/reference/com/google/android/exoplayer2/Player.EventListener.html">https://exoplayer.dev/doc/reference/com/google/android/exoplayer2/Player.EventListener.html</a><br><a target="_blank" rel="noopener" href="https://exoplayer.dev/listening-to-player-events.html#individual-callbacks-vs-onevents">https://exoplayer.dev/listening-to-player-events.html#individual-callbacks-vs-onevents</a><br><a target="_blank" rel="noopener" href="https://wenxiaoming.github.io/2018/03/19/analysis-of-ijkplayer/">https://wenxiaoming.github.io/2018/03/19/analysis-of-ijkplayer/</a><br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/256402336">https://zhuanlan.zhihu.com/p/256402336</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_34895720/article/details/101511876">https://blog.csdn.net/qq_34895720/article/details/101511876</a></p></blockquote></div><footer class="post-footer"><div class="post-nav"><div class="post-nav-item"><a href="/8ec66579.html" rel="prev" title="ä½¿ç”¨æ·±åº¦å­¦ä¹ ç®—æ³•è¿›è¡Œè„‘æœºæ¥å£çš„å¤šæ¨¡æ€ fNIRS-EEG åˆ†ç±»"><i class="fa fa-chevron-left"></i> ä½¿ç”¨æ·±åº¦å­¦ä¹ ç®—æ³•è¿›è¡Œè„‘æœºæ¥å£çš„å¤šæ¨¡æ€ fNIRS-EEG åˆ†ç±»</a></div><div class="post-nav-item"><a href="/845e8748.html" rel="next" title="å”¤èµ·è§¦è§‰çš„åŒå‘BCIæ§åˆ¶çš„æœºæ¢°è‡‚">å”¤èµ·è§¦è§‰çš„åŒå‘BCIæ§åˆ¶çš„æœºæ¢°è‡‚ <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="valine-comments"></div><script>window.addEventListener("tabs:register",()=>{let t=CONFIG.comments["activeClass"];var e;(t=CONFIG.comments.storage?localStorage.getItem("comments_active")||t:t)&&(e=document.querySelector(`a[href="#comment-${t}"]`))&&e.click()}),CONFIG.comments.storage&&window.addEventListener("tabs:click",t=>{t.target.matches(".tabs-comment .tab-content .tab-pane")&&(t=t.target.classList[1],localStorage.setItem("comments_active",t))})</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">æ–‡ç« ç›®å½•</li><li class="sidebar-nav-overview">ç«™ç‚¹æ¦‚è§ˆ</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%86%E9%A2%91%E6%92%AD%E6%94%BE%E5%99%A8%E7%9A%84%E5%8E%9F%E7%90%86"><span class="nav-number">1.</span> <span class="nav-text">è§†é¢‘æ’­æ”¾å™¨çš„åŸç†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MediaPlayer"><span class="nav-number">2.</span> <span class="nav-text">MediaPlayer</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#MediaPlayer%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">2.1.</span> <span class="nav-text">MediaPlayerç”Ÿå‘½å‘¨æœŸ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#MediaPlayer%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4%E6%97%B6%E5%BA%8F%E5%9B%BE"><span class="nav-number">2.2.</span> <span class="nav-text">MediaPlayerå®ç°æ­¥éª¤æ—¶åºå›¾</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%92%AD%E6%94%BE%E8%A7%86%E9%A2%91"><span class="nav-number">2.3.</span> <span class="nav-text">æ’­æ”¾è§†é¢‘</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ExoPlayer%EF%BC%88%E4%B8%93%E6%B3%A8%E4%BA%8EAndroid%EF%BC%89"><span class="nav-number">3.</span> <span class="nav-text">ExoPlayerï¼ˆä¸“æ³¨äºAndroidï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B"><span class="nav-number">3.1.</span> <span class="nav-text">ç®€ä»‹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="nav-number">3.2.</span> <span class="nav-text">ä¼˜ç¼ºç‚¹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%94%AF%E6%8C%81%E7%9A%84%E6%A0%BC%E5%BC%8F"><span class="nav-number">3.3.</span> <span class="nav-text">æ”¯æŒçš„æ ¼å¼</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%94%AF%E6%8C%81%E8%AE%BE%E5%A4%87%E6%83%85%E5%86%B5"><span class="nav-number">3.4.</span> <span class="nav-text">æ”¯æŒè®¾å¤‡æƒ…å†µ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9E%B6%E6%9E%84%E5%9B%BE"><span class="nav-number">3.5.</span> <span class="nav-text">æ¶æ„å›¾</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BA%BF%E7%A8%8B%E6%A8%A1%E5%9E%8B"><span class="nav-number">3.6.</span> <span class="nav-text">çº¿ç¨‹æ¨¡å‹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="nav-number">3.7.</span> <span class="nav-text">åŸºæœ¬ä½¿ç”¨</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8B%93%E5%B1%95%E4%BD%BF%E7%94%A8"><span class="nav-number">3.8.</span> <span class="nav-text">æ‹“å±•ä½¿ç”¨</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ijkPlayer%EF%BC%88%E4%B8%93%E6%B3%A8%E4%BA%8E%E8%B7%A8%E5%B9%B3%E5%8F%B0%EF%BC%89"><span class="nav-number">4.</span> <span class="nav-text">ijkPlayerï¼ˆä¸“æ³¨äºè·¨å¹³å°ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B-1"><span class="nav-number">4.1.</span> <span class="nav-text">ç®€ä»‹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E5%9B%BE"><span class="nav-number">4.2.</span> <span class="nav-text">ç³»ç»Ÿæ¶æ„å›¾</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Java%E5%B1%82%E5%85%B3%E9%94%AE%E6%A8%A1%E5%9D%97%E5%88%86%E6%9E%90"><span class="nav-number">4.3.</span> <span class="nav-text">Javaå±‚å…³é”®æ¨¡å—åˆ†æ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B3%E9%94%AE%E6%B5%81%E7%A8%8B"><span class="nav-number">4.4.</span> <span class="nav-text">å…³é”®æµç¨‹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8-1"><span class="nav-number">4.5.</span> <span class="nav-text">åŸºæœ¬ä½¿ç”¨</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B6%E5%AE%83"><span class="nav-number">5.</span> <span class="nav-text">å…¶å®ƒ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">6.</span> <span class="nav-text">æ€»ç»“</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E4%B8%8E%E9%B8%A3%E8%B0%A2"><span class="nav-number">7.</span> <span class="nav-text">å‚è€ƒä¸é¸£è°¢</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Aisaka Aoi" src="/images/manatsu.jpg"><p class="site-author-name" itemprop="name">Aisaka Aoi</p><div class="site-description" itemprop="description">é€¢å‚è‘µçš„ä¸ªäººåšå®¢</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">1034</span> <span class="site-state-item-name">æ—¥å¿—</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">20</span> <span class="site-state-item-name">åˆ†ç±»</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/AisakaAoi" title="GitHub ğŸ‘¨â€ğŸ’» â†’ https:&#x2F;&#x2F;github.com&#x2F;AisakaAoi" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub ğŸ‘¨â€ğŸ’»</a> </span><span class="links-of-author-item"><a href="https://github.com/Aisakaorz" title="GitHub ğŸ‘©â€ğŸ’» â†’ https:&#x2F;&#x2F;github.com&#x2F;Aisakaorz" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub ğŸ‘©â€ğŸ’»</a> </span><span class="links-of-author-item"><a href="mailto:aisakaaoi@qq.com" title="E-Mail ğŸ“§ â†’ mailto:aisakaaoi@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail ğŸ“§</a> </span><span class="links-of-author-item"><a href="mailto:chenzongnan@m.scnu.edu.cn" title="E-Mail ğŸ« â†’ mailto:chenzongnan@m.scnu.edu.cn" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail ğŸ«</a> </span><span class="links-of-author-item"><a href="https://space.bilibili.com/91560309" title="Bilibili ğŸ“º â†’ https:&#x2F;&#x2F;space.bilibili.com&#x2F;91560309" rel="noopener" target="_blank"><i class="fab fa-bilibili fa-fw"></i>Bilibili ğŸ“º</a> </span><span class="links-of-author-item"><a href="https://space.bilibili.com/198562921" title="Bilibili ğŸ® â†’ https:&#x2F;&#x2F;space.bilibili.com&#x2F;198562921" rel="noopener" target="_blank"><i class="fab fa-bilibili fa-fw"></i>Bilibili ğŸ®</a> </span><span class="links-of-author-item"><a href="https://www.youtube.com/channel/UCALvyn5Cl76GCotO9pczvjg" title="YouTube ğŸ“º â†’ https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCALvyn5Cl76GCotO9pczvjg" rel="noopener" target="_blank"><i class="fab fa-youtube fa-fw"></i>YouTube ğŸ“º</a></span></div></div><div class="back-to-top motion-element"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2026</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Aisaka Aoi</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-chart-area"></i> </span><span class="post-meta-item-text">ç«™ç‚¹æ€»å­—æ•°ï¼š</span> <span title="ç«™ç‚¹æ€»å­—æ•°">4.1m</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span class="post-meta-item-text">ç«™ç‚¹é˜…è¯»æ—¶é•¿ &asymp;</span> <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">171:02</span></div><div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> å¼ºåŠ›é©±åŠ¨</div></div></footer></div><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><script>document.querySelectorAll(".pdfobject-container").forEach(e=>{var t=e.dataset.target,a="#"+Object.entries({navpanes:0,toolbar:0,statusbar:0,pagemode:"thumbs",view:"FitH"}).map(([e,t])=>e+"="+encodeURIComponent(t)).join("&"),r="/lib/pdf/web/viewer.html?file="+encodeURIComponent(t)+a;NexT.utils.supportsPDFs()?e.innerHTML=`<embed class="pdfobject" src="${t+a}" type="application/pdf" style="height: ${e.dataset.height};">`:e.innerHTML=`<iframe src="${r}" style="height: ${e.dataset.height};" frameborder="0"></iframe>`})</script><script>NexT.utils.loadComments(document.querySelector("#valine-comments"),()=>{NexT.utils.getScript("//unpkg.com/valine/dist/Valine.min.js",()=>{var i=["nick","mail","link"],e="nick,mail,link".split(",").filter(e=>i.includes(e));new Valine({el:"#valine-comments",verify:!0,notify:!0,appId:"UqjWdRYbIUEUQRXhBUUIh1QE-gzGzoHsz",appKey:"gj89JXC485PFbpdHLKVkz6dm",placeholder:"è¿™é‡Œå¯ä»¥å‘é€è¯„è®º~ï¼ˆä¸Šé¢å¯ä»¥è¾“å…¥æ˜µç§°ã€é‚®ç®±ï¼‰",avatar:"mm",meta:e,pageSize:"10",visitor:!0,lang:"zh-cn",path:location.pathname,recordIP:!1,serverURLs:""})},window.Valine)})</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/assets/haru02.model.json"},display:{position:"right",width:208,height:520},mobile:{show:!1},log:!1})</script></body></html>